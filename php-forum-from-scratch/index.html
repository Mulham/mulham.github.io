<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="ar"  dir="rtl">
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  ><!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Z3Y8XXC1QZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Z3Y8XXC1QZ');
</script>
  <!-- Setup Open Graph image -->

  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="إنشاء منتدى PHP من الصفر" />
<meta property="og:locale" content="ar" />
<meta name="description" content="شرح شامل ومُيسَّر لطريقة إنشاء منتدى متكامل باستخدام php و MySQL من البداية" />
<meta property="og:description" content="شرح شامل ومُيسَّر لطريقة إنشاء منتدى متكامل باستخدام php و MySQL من البداية" />
<link rel="canonical" href="http://localhost:4000/php-forum-from-scratch/" />
<meta property="og:url" content="http://localhost:4000/php-forum-from-scratch/" />
<meta property="og:site_name" content="مدونة ملهم" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-06-20T00:00:00+03:00" />
<meta property="og:image" content="http://localhost:4000/assets/logo1.png" /><meta name="twitter:card" content="summary_large_image" />
      <meta property="twitter:image" content="http://localhost:4000/assets/logo1.png" />
<meta property="twitter:title" content="إنشاء منتدى PHP من الصفر" />
<meta name="twitter:site" content="@mulham_ib" />
<meta name="google-site-verification" content="8afPzIUY-s0_mkmDcrPusSEsaG6cs05pm__hPgkDzAU" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-10-18T00:18:26+03:00","datePublished":"2016-06-20T00:00:00+03:00","description":"شرح شامل ومُيسَّر لطريقة إنشاء منتدى متكامل باستخدام php و MySQL من البداية","headline":"إنشاء منتدى PHP من الصفر","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/php-forum-from-scratch/"},"url":"http://localhost:4000/php-forum-from-scratch/"}</script>
<!-- End Jekyll SEO tag -->


  <title>إنشاء منتدى PHP من الصفر | مدونة ملهم
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

  <link rel="manifest" href="/assets/img/favicons/site.webmanifest">

<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="مدونة ملهم">
<meta name="application-name" content="مدونة ملهم">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  <!-- Resource Hints -->
  
    
      
        <link rel="preconnect" href="https://fonts.googleapis.com" >
      
        <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
      
    
      
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      
        <link rel="dns-prefetch" href="https://fonts.gstatic.com" >
      
    
      
        <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      
        <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
      
    
  

  <!-- Bootstrap -->
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  

  <!-- Theme style -->
  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  <!-- Web Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css">

  <!-- 3rd-party Dependencies -->

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.27.20/dist/tocbot.min.css">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Image Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css">
  

  <!-- JavaScript -->

  
    <!-- Switch the mode between dark and light. -->

<script type="text/javascript">
  class ModeToggle {
    static get MODE_KEY() {
      return 'mode';
    }
    static get MODE_ATTR() {
      return 'data-mode';
    }
    static get DARK_MODE() {
      return 'dark';
    }
    static get LIGHT_MODE() {
      return 'light';
    }
    static get ID() {
      return 'mode-toggle';
    }

    constructor() {
      let self = this;this.sysDarkPrefers.addEventListener('change', () => {
        if (self.hasMode) {
          self.clearMode();
        }
        self.notify();
      });

      if (!this.hasMode) {
        return;
      }

      if (this.isDarkMode) {
        this.setDark();
      } else {
        this.setLight();
      }
    }

    get sysDarkPrefers() {
      return window.matchMedia('(prefers-color-scheme: dark)');
    }

    get isPreferDark() {
      return this.sysDarkPrefers.matches;
    }

    get isDarkMode() {
      return this.mode === ModeToggle.DARK_MODE;
    }

    get hasMode() {
      return this.mode != null;
    }

    get mode() {
      return sessionStorage.getItem(ModeToggle.MODE_KEY);
    }get modeStatus() {
      if (this.hasMode) {
        return this.mode;
      } else {
        return this.isPreferDark ? ModeToggle.DARK_MODE : ModeToggle.LIGHT_MODE;
      }
    }

    setDark() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE);
    }

    setLight() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE);
    }

    clearMode() {
      document.documentElement.removeAttribute(ModeToggle.MODE_ATTR);
      sessionStorage.removeItem(ModeToggle.MODE_KEY);
    }notify() {
      window.postMessage(
        {
          direction: ModeToggle.ID,
          message: this.modeStatus
        },
        '*'
      );
    }

    flipMode() {
      if (this.hasMode) {
        this.clearMode();
      } else {
        if (this.isPreferDark) {
          this.setLight();
        } else {
          this.setDark();
        }
      }

      this.notify();
    }
  }

  const modeToggle = new ModeToggle();
</script>

  

  <!-- A placeholder to allow defining custom metadata -->

</head>


  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle"><img src="/assets/Author.jpeg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a>

    <h1 class="site-title">
      <a href="/">مدونة ملهم</a>
    </h1>
    <p class="site-subtitle fst-italic mb-0">دروس وشروحات قيّمة وحصريّة لا سابق لها في المحتوى العربي</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>الرئيسية</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>الفئات</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>الوسوم</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>الأرشيف</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/urls/" class="nav-link">
            <i class="fa-fw fas fa-link"></i>
            

            <span>روابط مفيدة </span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/ask/" class="nav-link">
            <i class="fa-fw fas fa-comment"></i>
            

            <span>اسألني</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/support/" class="nav-link">
            <i class="fa-fw fas fa-handshake"></i>
            

            <span>طلب دعم </span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>حول</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
        <a
          href="https://github.com/mulham"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="https://twitter.com/mulham_ib"
          aria-label="twitter"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fa-brands fa-x-twitter"></i>
        </a>
      
    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['mulham94','gmail.com'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
      

      
        <a
          href="/feed.xml"
          aria-label="rss"
          

          

          

          
        >
          <i class="fas fa-rss"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">الرئيسية</a>
            </span>

          
        
          
            
              <span>إنشاء منتدى PHP من الصفر</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" aria-label="Navigation menu" class="btn btn-link">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      منشور
    </div>

    <button type="button" id="search-trigger" aria-label="search button" class="btn btn-link">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search id="search" class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="بحث..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel" aria-label="cancel search button">إلغاء</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->




  
  

  
    
      
      
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  

  


<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  




<!-- return -->




<article class="px-1">
  <header>
    <h1 data-toc-skip>إنشاء منتدى PHP من الصفر</h1>
    
      <p class="post-desc fw-light mb-4">شرح شامل ومُيسَّر لطريقة إنشاء منتدى متكامل باستخدام php و MySQL من البداية</p>
    

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        نُشر
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1466370000"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Jun 20, 2016
</time>

      </span>

      <!-- lastmod date -->
      
        <span>
          حُدّث
          <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1729199906"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Oct 18, 2024
</time>

        </span>
      
        <span>
<a aria-label="تعديل الصفحة" href="https://github.com/Mulham/mulham.github.io/tree/gh-pages/_posts/tutorials/2016-06-18-php-forum-from-scratch.md">عدِّل هذه الصفحة</a>
</span>
      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          بواسطة

          <em>
            
              <a href="https://x.com/mulham_ib">ملهم الإبراهيم</a>
            
          </em>
        </span>

        <div>
          <!-- pageviews -->
          

          <!-- read time -->
          <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="8579 كلمة"
>
  <em>42 
     دقيقة 
  </em> قراءة</span>

        </div>
      </div>
    </div>
  </header>

  <div class="content">
    <p>هذا الدرس من تأليف Evert padje وترجمتي (ملهم) مع إضافتي للتحديثات اللازمة، يركّز الدرس على إنشاء منتدى باستخدام php و Mysql من أجل قاعدة بيانات المنتدى ..</p>

<p>سنقوم في هذا الشرح ببناء منتدى PHP/MySQL من الصفر. هذا الشرح أيضاً ممتاز للاعتياد على أساسيات لغة البرمجة php وقواعد بيانات MySQL . لنبدأ سويةً !</p>

<ul id="markdown-toc">
  <li><a href="#أولاً--إنشاء-جداول-قاعدة-البيانات" id="markdown-toc-أولاً--إنشاء-جداول-قاعدة-البيانات">أولاً : إنشاء جداول قاعدة البيانات</a>    <ul>
      <li><a href="#جدول-المستخدمين" id="markdown-toc-جدول-المستخدمين">جدول المستخدمين</a>        <ul>
          <li><a href="#user_id" id="markdown-toc-user_id">user_id</a></li>
          <li><a href="#user_name" id="markdown-toc-user_name">user_name</a></li>
          <li><a href="#user_pass" id="markdown-toc-user_pass">user_pass</a></li>
          <li><a href="#user_email" id="markdown-toc-user_email">user_email</a></li>
          <li><a href="#user_date" id="markdown-toc-user_date">user_date</a></li>
          <li><a href="#user_level" id="markdown-toc-user_level">user_level</a></li>
        </ul>
      </li>
      <li><a href="#جدول-التصنيفات" id="markdown-toc-جدول-التصنيفات">جدول التصنيفات</a></li>
      <li><a href="#جدول-المواضيع" id="markdown-toc-جدول-المواضيع">جدول المواضيع</a></li>
      <li><a href="#جدول-التعليقات" id="markdown-toc-جدول-التعليقات">جدول التعليقات</a></li>
    </ul>
  </li>
  <li><a href="#ثانياً-مقدمة-لنظام-الترويسةالتذييل" id="markdown-toc-ثانياً-مقدمة-لنظام-الترويسةالتذييل">ثانياً: مقدمة لنظام الترويسة/التذييل</a>    <ul>
      <li><a href="#ملف-الترويسة-headerphp" id="markdown-toc-ملف-الترويسة-headerphp">ملف الترويسة header.php</a></li>
    </ul>
  </li>
  <li><a href="#ثالثاً-البدء-بالتنفيذ-الفعلي" id="markdown-toc-ثالثاً-البدء-بالتنفيذ-الفعلي">ثالثاً: البدء بالتنفيذ الفعلي</a></li>
  <li><a href="#رابعاً-عرض-المنتدى" id="markdown-toc-رابعاً-عرض-المنتدى">رابعاً: عرض المنتدى</a></li>
  <li><a href="#خامساً-اشتراك-مستخدم" id="markdown-toc-خامساً-اشتراك-مستخدم">خامساً: اشتراك مستخدم</a>    <ul>
      <li><a href="#التأكد-من-البيانات" id="markdown-toc-التأكد-من-البيانات">التأكد من البيانات</a></li>
    </ul>
  </li>
  <li><a href="#سادساً-إضافة-التفعيل-ومستوى-المستخدم" id="markdown-toc-سادساً-إضافة-التفعيل-ومستوى-المستخدم">سادساً: إضافة التفعيل ومستوى المستخدم</a></li>
  <li><a href="#سابعاً-إنشاء-تصنيف" id="markdown-toc-سابعاً-إنشاء-تصنيف">سابعاً: إنشاء تصنيف</a></li>
  <li><a href="#ثامناً-إضافة-تصنيفات-للصفحة-الرئيسية-indexphp" id="markdown-toc-ثامناً-إضافة-تصنيفات-للصفحة-الرئيسية-indexphp">ثامناً: إضافة تصنيفات للصفحة الرئيسية index.php</a></li>
  <li><a href="#تاسعاً-إنشاء-موضوع" id="markdown-toc-تاسعاً-إنشاء-موضوع">تاسعاً: إنشاء موضوع</a>    <ul>
      <li><a href="#عرض-النموذج" id="markdown-toc-عرض-النموذج">عرض النموذج</a></li>
      <li><a href="#معالجة-النموذج" id="markdown-toc-معالجة-النموذج">معالجة النموذج</a></li>
    </ul>
  </li>
  <li><a href="#عاشراً-عرض-التصنيفات" id="markdown-toc-عاشراً-عرض-التصنيفات">عاشراً: عرض التصنيفات</a></li>
  <li><a href="#الخطوة-11--عرض-المواضيع" id="markdown-toc-الخطوة-11--عرض-المواضيع">الخطوة 11 : عرض المواضيع</a></li>
  <li><a href="#الخطوة-12-إضافة-تعليق" id="markdown-toc-الخطوة-12-إضافة-تعليق">الخطوة 12: إضافة تعليق</a></li>
  <li><a href="#الخطوة-13-تسجيل-الخروج" id="markdown-toc-الخطوة-13-تسجيل-الخروج">الخطوة 13: تسجيل الخروج</a></li>
  <li><a href="#النهاية" id="markdown-toc-النهاية">النهاية</a></li>
</ul>

<h2 id="أولاً--إنشاء-جداول-قاعدة-البيانات"><span class="me-2">أولاً : إنشاء جداول قاعدة البيانات</span><a href="#أولاً--إنشاء-جداول-قاعدة-البيانات" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h2>

<p>دائماً، وقبل البدء بإنشاء أي تطبيق وب،  من الجيد القيام بإنشاء قاعدة بيانات جيدة لإدخال البيانات بشكل جيد. لنصف تطبيقنا الذي نريد إنشاؤه بجملة واحدة: سنقوم بإنشاء منتدى يحوي على مستخدمين يقوموا بإنشاء مواضيع بـ تصنيفات مختلفة، المستخدمين الآخرين يمكنهم إضافة تعليق.</p>

<p>وكما ترى، لقد قمت بالتركيز على كلمات معينة لتمثل أسماء الجداول في قاعدة البيانات التي نريدها.</p>

<ul>
  <li>
    <p>المستخدمون users</p>
  </li>
  <li>
    <p>التصنيفات categories</p>
  </li>
  <li>
    <p>المواضيع topics</p>
  </li>
  <li>
    <p>التعليقات replies</p>
  </li>
</ul>

<p>العناصر الثلاثة الأخيرة مرتبطة ببعضها البعض، لذا سنقوم بعمل ذلك في تصميم الجدول.</p>

<blockquote class="prompt-info">
  <p>يمكن إنشاء قاعدة بيانات MySQL باستخدام أوامر Sql ، ولكننا هنا سنستخدم برنامج بواجهة رسومية ليسهل العملية ويجعلها مفهومة أكثر ، وممتعة أكثر . البرنامج هو <a href="http://dev.mysql.com/downloads/workbench/">Workbench</a>  ، يمكنك التعرف عليه أكثر من خلال هذه المشاركة ، ولكن ذلك غير مطلوب لفهم تكملة هذا الشرح.</p>
</blockquote>

<p>ألقِ نظرة على المخطط أدناه</p>

<p><a href="/assets/php.png" class="popup img-link  shimmer"><img src="/assets/php.png" alt="كيفية عمل منتدى باستخدام php و MySQL من الصفر" loading="lazy"></a></p>

<p>يبدو مرتباً أليس كذلك ؟ كل مربع هو عبارة عن جدول في قاعدة البيانات . جميع الأعمدة مدونة داخل كل جدول .. والخطوط بين الجداول تمثل العلاقة بينهم . سوف نشرح ذلك لاحقاً ، لا بأس إن لم تفهم الكثير الآن ..</p>

<p>سوف نناقش كل جدول بشرح أوامر Sql . والتي تم إنشاءها تلقائياً مع إنشاء المخطط في الأعلى . لصنع كودك الخاص يمكنك إنشاء مخطط مشابه وستحصل على أوامر الـ Sql التي قامت بإنشاء المخطط أيضاً . بعض محررات قواعد البيانات مثل MySQL Workbench الذي قمنا بإستخدامه لإنتاج ذلك المخطط ينتج ملفات بلاحقة Sql أيضاً . ولكننا ننصح تعلم أوامر Sql حيث ستجد الأمر ممتعاً . لمقدمة حول Sql يمكنك قراءة المشاركة <a href="/sql/intro">هنا</a>.</p>

<h3 id="جدول-المستخدمين"><span class="me-2">جدول المستخدمين</span><a href="#جدول-المستخدمين" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-sql highlighter-rouge"><div class="code-header">
        <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">users</span> <span class="p">(</span>
<span class="n">user_id</span>
<span class="nb">INT</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
<span class="n">user_name</span>
<span class="nb">VARCHAR</span> <span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="n">user_pass</span>
<span class="nb">VARCHAR</span> <span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="n">user_email</span> <span class="nb">VARCHAR</span> <span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="n">user_date</span>
<span class="nb">DATETIME</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="n">user_level</span> <span class="nb">INT</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="k">UNIQUE</span> <span class="k">INDEX</span> <span class="n">user_name_unique</span> <span class="p">(</span><span class="n">user_name</span><span class="p">),</span>
<span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
<span class="p">)</span> <span class="k">TYPE</span><span class="o">=</span><span class="n">INNODB</span><span class="p">;</span>

</pre></td></tr></tbody></table></code></div></div>

<blockquote class="prompt-info">
  <p><strong>تحديث</strong>: في بعض إصدارات mysql قد يحدث خطأ عند كتابة الأمر أعلاه وكذلك أوامر sql في الأسفل، إذا حصلت على رسالة خطأ فقم دائماً باستبدال السطر الأخير TYPE=INNODB بـ Engine=InnoDB</p>
</blockquote>

<p>تستخدم عبار <code class="language-plaintext highlighter-rouge">CREATE TABLE</code> لإنشاء جدول جديد. يتبع هذه العبارة اسم الجدول المراد إنشاؤه، ويتم وضع جميع أعمدة الجدول بين قوسين. بالنسبة لأسماء الحقول فهي تشرح نفسها بنفسها، لذا سنناقش الآن أنواع البيانات فقط.</p>

<h4 id="user_id"><span class="me-2">user_id</span><a href="#user_id" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h4>

<p>مفتاح أولي يستخدم لتعريف كل عمود في الجدول بشكل فريد (غير قابل للتكرار).
نوع هذا الحقل هو <code class="language-plaintext highlighter-rouge">INT</code>، وهذا يعني أن الحقل يجب أن يحوي على عدد صحيح (غير عشري). ولا يمكن لهذا الحقل أن يكون فارغاً بما أننا استخدمنا عبارة (NOT NULL). يمكن أن ترى في أسفل الجدول أن حقل user_id تم تحديده على أنه مفتاح أولي (primary key). يستخدم المفتاح الأولي كما ذكرنا لتعريف كل عمود في الجدول بشكل فريد،أي لا يمكن لأي عمودين في الجدول أن يكون لهم نفس القيمة لهذا الحقل. الكلام غير واضح؟ بالمثال يزول الإشكال :</p>

<p>لدينا مستخدم على سبيل المثال يدعى أحمد، إذا قام مستخدم آخر بالتسجيل وبنفس الاسم، فسيكون هناك مشكلة. ﻷنه لا يمكن التفريق بين أحمد هذا وأحمد ذاك. لا يمكنك التفريق ولا يمكن حتى لقاعدة البيانات حينها التفريق بينهم. يتم حل هذه المشكلة باستخدام المتاح الأولي (primary key) ، حيث سيعطى للاسمين رقم مختلف.</p>

<p>جميع الجداول الأخرى تحوي على مفاتيح أولية وتعمل بنفس الطريقة.</p>

<h4 id="user_name"><span class="me-2">user_name</span><a href="#user_name" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h4>

<p>هذا حقل نصي (وليس رقمي كالحقل السابق). يدعي الحقل بلغة SQL حقل VARCHAR وهو أحد أنواع الحقول النصية. الرقم بين الأقواس هو أقصى طول لعدد الأحرف التي يمكن أن يتم إدخالها في الحقل. في حالتنا هذه يمكن للمستخدم اختيار اسم يبلغ طوله كحد أقصى 30 حرف. ولا يمكن لهذا الحقل أن يكون فارغاً (NOT NULL)، سترى أسفل الجدول أن هذا الحقل تم تحديده على أنه فريد (UNIQUE)، وهذا يعني أنه لا يمكن لشخصين التسجيل بنفس الاسم.</p>

<p>الجزء الذي يحوي على عبارة <code class="language-plaintext highlighter-rouge">UNIQUE INDEX</code> يُخبر قاعدة البيانات أننا نريد إضافة مفتاح فريد (UNIQUE KEY)، بعدها قمنا بتحديد اسم المفتاح الفريد وهو هنا <code class="language-plaintext highlighter-rouge">user_name_unique</code> ، وبين الأقواس اسم الحقل الذي سينطبق المفتاح الفريد عليه (ليصبح غير قابل لتكرار قيمته مرتين في الجدول).</p>

<h4 id="user_pass"><span class="me-2">user_pass</span><a href="#user_pass" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h4>

<p>هذا الحقل نفس الحقل السابق، باستثناء الطول الأقصى له ، فبما أن كلمة سر المستخدم ومهما كان طولها سيتم تشفيرها لنوع تشفير sha1 ، فكلمة السر ستكون دائماً مع نوع التشفير هذا بطول 40 حرف.</p>

<p>توضيح: حين تدخل أي كملة سر ولنفترض 123 أو لتكن mulham أو أي شيئ آخر ومهما يكن طول كلمة السر التي ستدخلها، يتم تطبيق تشفير لكلمة السر هذه قبل حفظها في قاعدة البيانات وذلك للأمان، بحيث اذا استطاع أحد ما بالوصول لقاعدة البيانات بالخطأ، فلن يتمكن من معرفة كلمات سر المستخدمين، وهناك أنواع كثير للتشفير منها هذا النوع <code class="language-plaintext highlighter-rouge">sha1</code> والذي يحول أي كلمة سر ل 40 حرف (أحرف وأرقام)، وعند نموذج دخول المستخدم (بعد اشتراكه)، نطبق نفس نوع التشفير على كلمة السر المدخلة لنقارن قيمة تشفير الكلمة المدخلة مع قيمة التشفير المحفوظة في قاعدة البيانات، فإذا طابقها، ولج المستخدم للموقع بشكل صحيح.</p>

<h4 id="user_email"><span class="me-2">user_email</span><a href="#user_email" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h4>

<p>هذا الحقل هو تماماً نفس الحقل السابق (بالنسبة لقاعدة البيانات، أما لاحقاً عند عمل نموذج دخول بلغة HTML فيختلف الموضوع قليلاً )</p>

<h4 id="user_date"><span class="me-2">user_date</span><a href="#user_date" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h4>

<p>في هذا الحقل يتم تخزين التاريخ الذي قام به المستخدم بالتسجيل. نوع هذا الحقل هو <code class="language-plaintext highlighter-rouge">DATETIME</code> ولا يمكن أن يكون فارغ. (يتم تعبئة الحقل تلقائياً بحسب توقيت السيرفر).</p>

<h4 id="user_level"><span class="me-2">user_level</span><a href="#user_level" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h4>

<p>يحوي هذا الحقل مستوى المستخدم، على سبيل المثال: 0 للمستخدم العادي و 1 للمدير. ستتعرف على المزيد لاحقاً.</p>

<h3 id="جدول-التصنيفات"><span class="me-2">جدول التصنيفات</span><a href="#جدول-التصنيفات" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-sql highlighter-rouge"><div class="code-header">
        <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">categories</span> <span class="p">(</span>
<span class="n">cat_id</span>
<span class="nb">INT</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
<span class="n">cat_name</span>
<span class="nb">VARCHAR</span> <span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="n">cat_description</span>
<span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="k">UNIQUE</span> <span class="k">INDEX</span> <span class="n">cat_name_unique</span> <span class="p">(</span><span class="n">cat_name</span><span class="p">),</span>
<span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">cat_id</span><span class="p">)</span>
<span class="p">)</span> <span class="k">TYPE</span><span class="o">=</span><span class="n">INNODB</span>

</pre></td></tr></tbody></table></code></div></div>

<p>أنواع البيانات هنا تعمل بشكل أساسي بنفس الطريقة التي تعمل بها أنواع البيانات في جدول المستخدمين. يحوي هذا الجدول أيضاً مفتاح أولي ، واسم التصنيف يجب أن يكون فريد .</p>

<h3 id="جدول-المواضيع"><span class="me-2">جدول المواضيع</span><a href="#جدول-المواضيع" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-sql highlighter-rouge"><div class="code-header">
        <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">topics</span> <span class="p">(</span>
<span class="n">topic_id</span>
<span class="nb">INT</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
<span class="n">topic_subject</span>
<span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="n">topic_date</span>
<span class="nb">DATETIME</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="n">topic_cat</span>
<span class="nb">INT</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="n">topic_by</span>
<span class="nb">INT</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">topic_id</span><span class="p">)</span>
<span class="p">)</span> <span class="k">TYPE</span><span class="o">=</span><span class="n">INNODB</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></div></div>

<p>هذا الجدول تقريباً نفس الجداول السابقة، باستثناء حقل <code class="language-plaintext highlighter-rouge">topic_by</code> والذي يشير للمستخدم المنشئ للموضوع. وحقل <code class="language-plaintext highlighter-rouge">topic_cat</code> الذي يشير للتصنيف الذي يتبع الموضوع له. لا يمكن تحديد العلاقات بين هذه الحقول بذكر أسماء الحقول فقط. فيجب أن نُعلم قاعدة البيانات أن هذا الحقل (<code class="language-plaintext highlighter-rouge">topic_by</code>) يجب أن يحتوي على الرقم التسلسلي <code class="language-plaintext highlighter-rouge">user_id</code> لمستخدم موجود في جدول المستخدمين، والحقل الآخر (<code class="language-plaintext highlighter-rouge">topic_cat</code>) يجب أن يحتوي على الرقم التسلسلي cat_id لتصنيف موجود في جدول التصنيفات. سنضيف هذه العلاقات بين الحقول والجداول بعد مناقشة جدول التعليقات.</p>

<h3 id="جدول-التعليقات"><span class="me-2">جدول التعليقات</span><a href="#جدول-التعليقات" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-sql highlighter-rouge"><div class="code-header">
        <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">posts</span> <span class="p">(</span>
<span class="n">post_id</span>
<span class="nb">INT</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
<span class="n">post_content</span>
<span class="nb">TEXT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="n">post_date</span>
<span class="nb">DATETIME</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="n">post_topic</span>
<span class="nb">INT</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="n">post_by</span>
<span class="nb">INT</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">post_id</span><span class="p">)</span>
<span class="p">)</span> <span class="k">TYPE</span><span class="o">=</span><span class="n">INNODB</span><span class="p">;</span>

</pre></td></tr></tbody></table></code></div></div>

<p>هذا الجدول هو نفس بقية الجداول، ويوجد هنا أيضاً حقل يشير لرقم مستخدم user_id في جدول المستخدمين : حقل <code class="language-plaintext highlighter-rouge">post_by</code> ، حقل <code class="language-plaintext highlighter-rouge">post_topic</code> يشير للموضوع الذي يتبع التعليق له .</p>

<p>المفتاح الخارجي <code class="language-plaintext highlighter-rouge">foreign key</code> هو قيد مرجعي بين جدولين. يُعرِّف المفتاح الخارجي عمود أو مجموعة أعمدة في جدول (مرجعي) والذي يشير لعمود أو مجموعة أعمدة في جدول (مرجعي) آخر .</p>

<p>الآن وبعد تنفيذ هذه التعليمات وإنشاء الجداول. أصبح لدينا ترتيب بيانات جيد، ولكن العلاقات بين هذه البيانات مازالت مفقودة. لنبدأ بتعريف أحد هذه العلاقات. سوف نستخدم شيئ يدعي المفتاح الخارجي. بعض الشروط لهذا الاستخدام:</p>

<ul>
  <li>
    <p>العمود في الجدول المرجعي والذي يشير له المفتاح الخارجي يجب أن يكون مفتاح أولي.</p>
  </li>
  <li>
    <p>القيم المشار لها يجب أن تكون موجودة في الجدول المرجعي.</p>
  </li>
</ul>

<p>أعرف أن كل هذه المصطلحات جديدة عليك، ولكنك ستكتشف أنها بسيطة جداً، هي فقط علاقة بين جدول وآخر ، ستتضح لك الأمور في السطور القادمة.</p>

<p>بإضافة مفاتيح خارجية تصبح المعلومات مرتبطة ببعضها، وهذا مهم جداً في ترتيب قاعدة البيانات.</p>

<p>الآن أصبحت تعرف نوعاً ما ما هو المفتاح الخارجي ولماذا نستخدمه. حان الوقت لإضافة مفاتيح خارجية للجداول التي أنشأناها باستخدام عبارة <code class="language-plaintext highlighter-rouge">ALTER</code>، والتي تستخدم لتعديل جدول موجود مسبقاً.</p>

<p>سنقوم في البداية بربط المواضيع بالتصنيفات:</p>

<div class="language-sql highlighter-rouge"><div class="code-header">
        <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">topics</span> <span class="k">ADD</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">topic_cat</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">categories</span><span class="p">(</span><span class="n">cat_id</span><span class="p">)</span> <span class="k">ON</span> <span class="k">DELETE</span> <span class="k">CASCADE</span> <span class="k">ON</span> <span class="k">UPDATE</span> <span class="k">CASCADE</span><span class="p">;</span>

</pre></td></tr></tbody></table></code></div></div>

<p>الجزء الأخير من التعليمة يوضح ما يجري. فعندما يتم حذف التصنيف من قاعدة البيانات، جميع المواضيع المرتبطة بهذا التصنيف سيتم حذفها أيضاً. إذا تم تغيير قيمة cat_id لتصنيف ما، جميع المواضيع المرتبطة بهذا التصنيف سيتم تحديثها أيضاً. وهذا ما تقوم به عبارة <code class="language-plaintext highlighter-rouge">ON UPDATE CASCADE</code> . بالطبع يمكنك التراجع عن ذلك لحماية بياناتك، وذلك بجعل حذف تنصيف ما غير ممكن ما زال هناك مواضيع مرتبطة بهذا التصنيف، إذا أردت القيام بذلك، فعليك استبدال <code class="language-plaintext highlighter-rouge">ON DELETE</code> <code class="language-plaintext highlighter-rouge">CASCADE</code> إلى <code class="language-plaintext highlighter-rouge">ON DELETE RESTRICT</code> . يوجد أيضاً عبارات <code class="language-plaintext highlighter-rouge">SET NULL</code> أي اجعله فارغاً و <code class="language-plaintext highlighter-rouge">NO ACTION</code> أي لا تقم بأي إجراء.</p>

<p>الآن، كل موضوع أصبح مرتبط بتصنيف ما. لنقم بربط المواضيع بالمستخدمين المنشئين لهم.</p>

<div class="language-sql highlighter-rouge"><div class="code-header">
        <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">topics</span> <span class="k">ADD</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">topic_by</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">users</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span> <span class="k">ON</span> <span class="k">DELETE</span> <span class="k">RESTRICT</span> <span class="k">ON</span> <span class="k">UPDATE</span> <span class="k">CASCADE</span><span class="p">;</span>

</pre></td></tr></tbody></table></code></div></div>

<p>المفتاح الخارجي هنا هو نفسه كسابقه، ولكن هناك فرق واحد: لا يمكن حذف المستخدم ما زال هناك مواضيع مرتبطة به، أو بالأحرى مرتبطة بـ <code class="language-plaintext highlighter-rouge">user_id</code> للمستخدم (رقمه التسلسلي في قاعدة البيانات). لم نضع هنا <code class="language-plaintext highlighter-rouge">ON DELETE CASCADE</code>  ﻷننا لا نريد للمعلومات المرتبطة بحساب ما والتي قد تكون قيمة أن تُحذف عندما يقرر المستخدم حذف حسابه. 
لإبقاء خيار حذف الحساب متاحاً للمستخدمين، يجب أن تقوم بإنشاء ميزة تنقل المواضيع لحساب “مجهول” عند حذف مستخدم لحسابه. وفي الواقع هذا ليش موضوع نقاشنا في هذا الشرح.</p>

<p>ربط التعليقات بالمواضيع:</p>

<div class="language-sql highlighter-rouge"><div class="code-header">
        <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">posts</span> <span class="k">ADD</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">post_topic</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">topics</span><span class="p">(</span><span class="n">topic_id</span><span class="p">)</span> <span class="k">ON</span> <span class="k">DELETE</span> <span class="k">CASCADE</span> <span class="k">ON</span> <span class="k">UPDATE</span> <span class="k">CASCADE</span><span class="p">;</span>

</pre></td></tr></tbody></table></code></div></div>

<p>وأخيراً، ربط كل تعليق بالمستخدم المنشئ له:</p>

<div class="language-sql highlighter-rouge"><div class="code-header">
        <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">posts</span> <span class="k">ADD</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">post_by</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">users</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span> <span class="k">ON</span> <span class="k">DELETE</span> <span class="k">RESTRICT</span> <span class="k">ON</span> <span class="k">UPDATE</span> <span class="k">CASCADE</span><span class="p">;</span>

</pre></td></tr></tbody></table></code></div></div>

<p>انتهى الجزء الخاص بقاعدة البيانات! لقد كان عملاً متعباً نوعاً ما، ولكن النتيجة تستحق هذا العمل، حيث حصلنا على قاعدة بيانات نموذجبة.</p>

<h2 id="ثانياً-مقدمة-لنظام-الترويسةالتذييل"><span class="me-2">ثانياً: مقدمة لنظام الترويسة/التذييل</span><a href="#ثانياً-مقدمة-لنظام-الترويسةالتذييل" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h2>

<p>كل صفحة في منتدانا تتطلب بعض الأشياء الأساسية، مثل بعض الترميزات والتنسيقات. ولذا سنقوم بتضمين ملف الترويسة header.php بأعلى كل صفحة في المنتدى، والتذييل footer.php أسفل كل صفحة. يتضمن ملف الترويسة الترميزات الأساسية وروابط للملفات التي يجب تحميلها لعرض المنتدى بشكل جيد، وكذلك بعض المعلومات المهمة حول المنتدى، مثل العنوان والأيقونة والشعار..</p>

<h3 id="ملف-الترويسة-headerphp"><span class="me-2">ملف الترويسة header.php</span><a href="#ملف-الترويسة-headerphp" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-php highlighter-rouge"><div class="code-header">
        <span data-label-text="PHP"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="rouge-code"><pre>
<span class="cp">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;</span>
<span class="nt">&lt;html</span> <span class="na">xmlns=</span><span class="s">"http://www.w3.org/1999/xhtml"</span> <span class="na">xml:lang=</span><span class="s">"nl"</span> <span class="na">lang=</span><span class="s">"nl"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"Content-Type"</span> <span class="na">content=</span><span class="s">"text/html; charset=UTF-8"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"description"</span> <span class="na">content=</span><span class="s">"A short description."</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"keywords"</span> <span class="na">content=</span><span class="s">"put, keywords, here"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;title&gt;</span>PHP-MySQL forum<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"style.css"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;h1&gt;</span>My forum<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"wrapper"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"menu"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"item"</span> <span class="na">href=</span><span class="s">"/forum/index.php"</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;</span> -
        <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"item"</span> <span class="na">href=</span><span class="s">"/forum/create_topic.php"</span><span class="nt">&gt;</span>Create a topic<span class="nt">&lt;/a&gt;</span> -
        <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"item"</span> <span class="na">href=</span><span class="s">"/forum/create_cat.php"</span><span class="nt">&gt;</span>Create a category<span class="nt">&lt;/a&gt;</span>
         
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"userbar"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"userbar"</span><span class="nt">&gt;</span>Hello Example. Not you? Log out.<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"content"</span><span class="nt">&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<p>سنستخدم وسم <code class="language-plaintext highlighter-rouge">&lt;div id="wrapper"&gt;</code>  لجعل تنسيق كامل الصفحة أسهل. الوسم <code class="language-plaintext highlighter-rouge">&lt;div id="menu"&gt;</code> كما هو واضح يضم قائمة بروابط لصفحات الموقع التي سننشؤها لاحقاً. وسم <code class="language-plaintext highlighter-rouge">&lt;div id="userbar"&gt;</code> سيستخدم كشريط علوي يضم معلومات مثل اسم المستخدم ورابط لتسجيل الخروج. والوسم الأخير سيحوي بشكل واضح المعلومات الفعلية للصفحة التي يكون بها المستخدم.</p>

<p>إذا كنت تقرأ بانتباه، فربما لاحظت أننا فقدنا شيئاً ما. فلم ننهي وسمي <code class="language-plaintext highlighter-rouge">&lt;html&gt;</code> و <code class="language-plaintext highlighter-rouge">&lt;body&gt;</code> كما هو واجب في لغة html. أي لم نكتب في نهاية ملف الترويسة <code class="language-plaintext highlighter-rouge">&lt;/body&gt; &gt;/html&gt;</code>
والسبب هو أننا سنضعهم في ملف التذييل <code class="language-plaintext highlighter-rouge">footer.php</code> :</p>

<div class="language-php highlighter-rouge"><div class="code-header">
        <span data-label-text="PHP"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>
<span class="nt">&lt;/div&gt;</span><span class="c">&lt;!-- content --&gt;</span>
<span class="nt">&lt;/div&gt;</span><span class="c">&lt;!-- wrapper --&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"footer"</span><span class="nt">&gt;</span>Created for Nettuts+<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<p>عندما نضمّن ملفي الترويسة والتذييل في كل صفحة، فإن محتوى الصفحة الفعلي سيظهر بين الترويسة (بداية الصفحة) والتذييل (نهاية الصفحة). لهذه الطريقة عدة فوائد. أولها وأهمها أن كل شيئ سيكون منسق بشكل صحيح. مثال سريع :</p>

<div class="language-php highlighter-rouge"><div class="code-header">
        <span data-label-text="PHP"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre>
<span class="cp">&lt;?php</span>
<span class="nv">$error</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="k">if</span><span class="p">(</span><span class="nv">$error</span> <span class="o">==</span> <span class="kc">false</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//the beautifully styled content, everything looks good</span>
    <span class="k">echo</span> <span class="s1">'&lt;div id="content"&gt;some text&lt;/div&gt;'</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    <span class="c1">//bad looking, unstyled error :-( </span>
<span class="p">}</span> 
<span class="cp">?&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<p>كما ترى، إذا لم يحدث أخطاء في الصفحة فستظهر بشكل أنيق. أما اذا كان هناك خطأ، فكل شيئ سيكون مبعثر. ولهذا السبب يجب دائماً التأكد ليس من تنسيق المحتوى فقط، وإنما أيضاً من الأخطاء التي يمكن أن تحدث.</p>

<p>ميزة أخرى لهذه الطريقة (تضمين ملفي الترويسة والتذييل) هو إمكانية عمل تغييرات سريعة. فسترى أنك وبعد إنهاء هذا الشرح إذا أردت التعديل على ملف التذييل مثلاً footer.php، فسترى أن التذييل سينطبق مباشرة على كل صفحة في المنتدى.</p>

<p>أخيراً سوف نقوم بإضافة بعض التنسيقات لملف الترويسة header.php والتي تزودنا بإظهارات وترميزات أساسية. لا شيئ معقد هنا، ولا داعي لفهم الكود.</p>

<div class="language-css highlighter-rouge"><div class="code-header">
        <span data-label-text="CSS"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
</pre></td><td class="rouge-code"><pre>
<span class="o">&lt;</span><span class="nt">style</span><span class="o">&gt;</span>
<span class="nt">body</span> <span class="p">{</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#4E4E4E</span><span class="p">;</span>
    <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>         <span class="c">/* make sure IE centers the page too */</span>
<span class="p">}</span>
 
<span class="nf">#wrapper</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">900px</span><span class="p">;</span>
    <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span> <span class="nb">auto</span><span class="p">;</span>             <span class="c">/* center the page */</span>
<span class="p">}</span>
 
<span class="nf">#content</span> <span class="p">{</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#fff</span><span class="p">;</span>
    <span class="nl">border</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="m">#000</span><span class="p">;</span>
    <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
    <span class="nl">font-family</span><span class="p">:</span> <span class="n">Arial</span><span class="p">;</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">20px</span> <span class="m">30px</span><span class="p">;</span>
    <span class="nl">text-align</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>                <span class="c">/* fill up the entire div */</span>
<span class="p">}</span>
 
<span class="nf">#menu</span> <span class="p">{</span>
    <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
    <span class="nl">border</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="m">#000</span><span class="p">;</span>
    <span class="nl">border-bottom</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>        <span class="c">/* avoid a double border */</span>
    <span class="nl">clear</span><span class="p">:</span> <span class="nb">both</span><span class="p">;</span>                <span class="c">/* clear:both makes sure the content div doesn't float next to this one but stays under it */</span>
    <span class="nl">width</span><span class="p">:</span><span class="m">100%</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span><span class="m">20px</span><span class="p">;</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">0</span> <span class="m">30px</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#FFF</span><span class="p">;</span>
    <span class="nl">text-align</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="m">85%</span><span class="p">;</span>
<span class="p">}</span>
 
<span class="nf">#menu</span> <span class="nt">a</span><span class="nd">:hover</span> <span class="p">{</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#009FC1</span><span class="p">;</span>
<span class="p">}</span>
 
<span class="nf">#userbar</span> <span class="p">{</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#fff</span><span class="p">;</span>
    <span class="nl">float</span><span class="p">:</span> <span class="nb">right</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">250px</span><span class="p">;</span>
<span class="p">}</span>
 
<span class="nf">#footer</span> <span class="p">{</span>
    <span class="nl">clear</span><span class="p">:</span> <span class="nb">both</span><span class="p">;</span>
<span class="p">}</span>
 
<span class="c">/* begin table styles */</span>
<span class="nt">table</span> <span class="p">{</span>
    <span class="nl">border-collapse</span><span class="p">:</span> <span class="nb">collapse</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
<span class="p">}</span>
 
<span class="nt">table</span> <span class="nt">a</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="m">#000</span><span class="p">;</span>
<span class="p">}</span>
 
<span class="nt">table</span> <span class="nt">a</span><span class="nd">:hover</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span><span class="m">#373737</span><span class="p">;</span>
    <span class="nl">text-decoration</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
<span class="p">}</span>
 
<span class="nt">th</span> <span class="p">{</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#B40E1F</span><span class="p">;</span>
    <span class="nl">color</span><span class="p">:</span> <span class="m">#F0F0F0</span><span class="p">;</span>
<span class="p">}</span>
 
<span class="nt">td</span> <span class="p">{</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
<span class="p">}</span>
 
<span class="c">/* Begin font styles */</span>
<span class="nt">h1</span><span class="o">,</span> <span class="nf">#footer</span> <span class="p">{</span>
    <span class="nl">font-family</span><span class="p">:</span> <span class="n">Arial</span><span class="p">;</span>
    <span class="nl">color</span><span class="p">:</span> <span class="m">#F1F3F1</span><span class="p">;</span>
<span class="p">}</span>
 
<span class="nt">h3</span> <span class="p">{</span><span class="nl">margin</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span> <span class="nl">padding</span><span class="p">:</span> <span class="m">0</span><span class="p">;}</span>
 
<span class="c">/* Menu styles */</span>
<span class="nc">.item</span> <span class="p">{</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#00728B</span><span class="p">;</span>
    <span class="nl">border</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="m">#032472</span><span class="p">;</span>
    <span class="nl">color</span><span class="p">:</span> <span class="m">#FFF</span><span class="p">;</span>
    <span class="nl">font-family</span><span class="p">:</span> <span class="n">Arial</span><span class="p">;</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">3px</span><span class="p">;</span>
    <span class="nl">text-decoration</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
<span class="p">}</span>
 
<span class="nc">.leftpart</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">70%</span><span class="p">;</span>
<span class="p">}</span>
 
<span class="nc">.rightpart</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">30%</span><span class="p">;</span>
<span class="p">}</span>
 
<span class="nc">.small</span> <span class="p">{</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="m">75%</span><span class="p">;</span>
    <span class="nl">color</span><span class="p">:</span> <span class="m">#373737</span><span class="p">;</span>
<span class="p">}</span>
<span class="nf">#footer</span> <span class="p">{</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="m">65%</span><span class="p">;</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">3px</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span><span class="p">;</span>
<span class="p">}</span>
 
<span class="nc">.topic-post</span> <span class="p">{</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">100px</span><span class="p">;</span>
    <span class="nl">overflow</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>
<span class="p">}</span>
 
<span class="nc">.post-content</span> <span class="p">{</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">30px</span><span class="p">;</span>
<span class="p">}</span>
 
<span class="nt">textarea</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">500px</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">200px</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">&lt;/</span><span class="nt">style</span><span class="o">&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<h2 id="ثالثاً-البدء-بالتنفيذ-الفعلي"><span class="me-2">ثالثاً: البدء بالتنفيذ الفعلي</span><a href="#ثالثاً-البدء-بالتنفيذ-الفعلي" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h2>

<p>قبل أن نستطيع قراءة أي شيئ من قاعدة البيانات، يجب أن نقيم اتصال بها. وهذا ما سيقوم به ملف connect.php الذي سنضمنه بكل ملف ننشؤه.</p>

<div class="language-php highlighter-rouge"><div class="code-header">
        <span data-label-text="PHP"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre>
<span class="cp">&lt;?php</span>
<span class="c1">//connect.php</span>
<span class="nv">$server</span> <span class="o">=</span> <span class="s1">'localhost'</span><span class="p">;</span>
<span class="nv">$username</span>   <span class="o">=</span> <span class="s1">'usernamehere'</span><span class="p">;</span>
<span class="nv">$password</span>   <span class="o">=</span> <span class="s1">'passwordhere'</span><span class="p">;</span>
<span class="nv">$database</span>   <span class="o">=</span> <span class="s1">'databasenamehere'</span><span class="p">;</span>
 
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">mysql_connect</span><span class="p">(</span><span class="nv">$server</span><span class="p">,</span> <span class="nv">$username</span><span class="p">,</span>  <span class="nv">$password</span><span class="p">))</span>
<span class="p">{</span>
    <span class="k">exit</span><span class="p">(</span><span class="s1">'Error: could not establish database connection'</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">mysql_select_db</span><span class="p">(</span><span class="nv">$database</span><span class="p">))</span>
<span class="p">{</span>
    <span class="k">exit</span><span class="p">(</span><span class="s1">'Error: could not select the database'</span><span class="p">);</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<p>ببساطة استبدل فقط القيم الافتراضية للمتغيرات في أعلى الكود ببياناتك الخاصة. احفظ الملف ودعنا ننطلق للتكملة.</p>

<blockquote class="prompt-info">
  <p><strong>تحديث</strong>: إذا كنت تستخدم php7 فلن يعمل الكود أعلاه، بل يجب كتابة الكود التالي مع استبدال القيم أيضاً</p>
</blockquote>

<div class="language-php highlighter-rouge"><div class="code-header">
        <span data-label-text="PHP"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre>
<span class="cp">&lt;?php</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$user</span> <span class="o">=</span> <span class="s1">'root'</span><span class="p">;</span>
    <span class="nv">$pass</span> <span class="o">=</span> <span class="s1">'Password here'</span><span class="p">;</span>
    <span class="nv">$dbh</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PDO</span><span class="p">(</span><span class="s1">'mysql:host=localhost;dbname=Name of Database Here'</span><span class="p">,</span> <span class="nv">$user</span><span class="p">,</span> <span class="nv">$pass</span><span class="p">);</span>

    <span class="nv">$dbh</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nc">PDOException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">print</span> <span class="s2">"Error!: "</span> <span class="mf">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="nf">getMessage</span><span class="p">()</span> <span class="mf">.</span> <span class="s2">"&lt;br/&gt;"</span><span class="p">;</span>
    <span class="k">die</span><span class="p">();</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<h2 id="رابعاً-عرض-المنتدى"><span class="me-2">رابعاً: عرض المنتدى</span><a href="#رابعاً-عرض-المنتدى" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h2>

<p>بما أننا بدأنا بتقنيات أساسية، سنقوم بعمل طريقة عرض مبسطة للمنتدى الآن. وبالتالي سنقوم بإنشاء الصفحة الرئيسية للمنتدى index.php</p>

<div class="language-php highlighter-rouge"><div class="code-header">
        <span data-label-text="PHP"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre>
<span class="cp">&lt;?php</span>
<span class="c1">//index.php</span>
<span class="k">include</span> <span class="s1">'connect.php'</span><span class="p">;</span>
<span class="k">include</span> <span class="s1">'header.php'</span><span class="p">;</span>
         
<span class="k">echo</span> <span class="s1">'&lt;tr&gt;'</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s1">'&lt;td class="leftpart"&gt;'</span><span class="p">;</span>
        <span class="k">echo</span> <span class="s1">'&lt;h3&gt;&lt;a href="category.php?id="&gt;Category name&lt;/a&gt;&lt;/h3&gt; Category description goes here'</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s1">'&lt;/td&gt;'</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s1">'&lt;td class="rightpart"&gt;'</span><span class="p">;</span>
            <span class="k">echo</span> <span class="s1">'&lt;a href="topic.php?id="&gt;Topic subject&lt;/a&gt; at 10-10'</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s1">'&lt;/td&gt;'</span><span class="p">;</span>
<span class="k">echo</span> <span class="s1">'&lt;/tr&gt;'</span><span class="p">;</span>
<span class="k">include</span> <span class="s1">'footer.php'</span><span class="p">;</span>
<span class="cp">?&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<p>الآن اكتمل منتداك تقريباً. بفتحك لهذا الملف من السيرفر ستشاهد المنتدى بشكل أنيق وبسيط. سنقوم خلال بقية الشرح بتحديث هذا الملف لنحصل على النتيجة النهائية، خطوة بخطوة!</p>

<h2 id="خامساً-اشتراك-مستخدم"><span class="me-2">خامساً: اشتراك مستخدم</span><a href="#خامساً-اشتراك-مستخدم" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h2>

<p>دعنا الآن ننشئ نموذج اشتراك بسيط بلغة html حيث يمكن للمستخدمين الاشتراك بالمنتدى</p>

<p><a href="/assets/2.png" class="popup img-link  shimmer"><img src="/assets/2.png" alt="كيفية عمل منتدى باستخدام php و MySQL من الصفر-2" loading="lazy"></a></p>

<p>سنحتاج أيضاً لصفحة بلغة php لإرسال بيانات النموذج لقاعدة البيانات وإتمام اشتراك المستخدم. سنقوم باستخدام المتغير  <code class="language-plaintext highlighter-rouge">$_SERVER</code> .
المتغير <code class="language-plaintext highlighter-rouge">$_SERVER</code> يحوي مجموعة من القيم التي يتم تعيينها تلقائياً مع كل طلب. أحد هذه القيم هو <code class="language-plaintext highlighter-rouge">REQUEST_METHOD</code> . عندما يتم طلب صفحة بواسطة <code class="language-plaintext highlighter-rouge">GET</code> . فسيحمل هذا المتغير القيمة <code class="language-plaintext highlighter-rouge">GET</code> . وعندما يتم طلب الصفحة بواسطة <code class="language-plaintext highlighter-rouge">POST</code> ، فسيحمل المتغير القيمة <code class="language-plaintext highlighter-rouge">POST</code> . ولذا سنستخدم هذا المتغير لمعرفة إذا تم إرسال النموذج (بواسطة <code class="language-plaintext highlighter-rouge">POST</code>). انظر صفحة الاشتراك signup.php أدناه</p>

<div class="language-php highlighter-rouge"><div class="code-header">
        <span data-label-text="PHP"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
</pre></td><td class="rouge-code"><pre>
<span class="cp">&lt;?php</span>
<span class="c1">//signup.php</span>
<span class="k">include</span> <span class="s1">'connect.php'</span><span class="p">;</span>
<span class="k">include</span> <span class="s1">'header.php'</span><span class="p">;</span>
 
<span class="k">echo</span> <span class="s1">'&lt;h3&gt;Sign up&lt;/h3&gt;'</span><span class="p">;</span>
 
<span class="k">if</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'REQUEST_METHOD'</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">'POST'</span><span class="p">)</span>
<span class="p">{</span>
    <span class="cm">/*the form hasn't been posted yet, display it
      note that the action="" will cause the form to post to the same page it is on */</span>
    <span class="k">echo</span> <span class="s1">'&lt;form method="post" action=""&gt;
        Username: &lt;input type="text" name="user_name" /&gt;
        Password: &lt;input type="password" name="user_pass"&gt;
        Password again: &lt;input type="password" name="user_pass_check"&gt;
        E-mail: &lt;input type="email" name="user_email"&gt;
        &lt;input type="submit" value="Submit" /&gt;
     &lt;/form&gt;'</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    <span class="cm">/* so, the form has been posted, we'll process the data in three steps:
        1.  Check the data
        2.  Let the user refill the wrong fields (if necessary)
        3.  Save the data 
    */</span>
    <span class="nv">$errors</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span> <span class="cm">/* declare the array for later use */</span>
     
    <span class="k">if</span><span class="p">(</span><span class="k">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_name'</span><span class="p">]))</span>
    <span class="p">{</span>
        <span class="c1">//the user name exists</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">ctype_alnum</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_name'</span><span class="p">]))</span>
        <span class="p">{</span>
            <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'The username can only contain letters and digits.'</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_name'</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">30</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'The username cannot be longer than 30 characters.'</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'The username field must not be empty.'</span><span class="p">;</span>
    <span class="p">}</span>
     
     
    <span class="k">if</span><span class="p">(</span><span class="k">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_pass'</span><span class="p">]))</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_pass'</span><span class="p">]</span> <span class="o">!=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_pass_check'</span><span class="p">])</span>
        <span class="p">{</span>
            <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'The two passwords did not match.'</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'The password field cannot be empty.'</span><span class="p">;</span>
    <span class="p">}</span>
     
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$errors</span><span class="p">))</span> <span class="cm">/*check for an empty array, if there are errors, they're in this array (note the ! operator)*/</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="s1">'Uh-oh.. a couple of fields are not filled in correctly..'</span><span class="p">;</span>
        <span class="k">echo</span> <span class="s1">'&lt;ul&gt;'</span><span class="p">;</span>
        <span class="k">foreach</span><span class="p">(</span><span class="nv">$errors</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span> <span class="cm">/* walk through the array so all the errors get displayed */</span>
        <span class="p">{</span>
            <span class="k">echo</span> <span class="s1">'&lt;li&gt;'</span> <span class="mf">.</span> <span class="nv">$value</span> <span class="mf">.</span> <span class="s1">'&lt;/li&gt;'</span><span class="p">;</span> <span class="cm">/* this generates a nice error list */</span>
        <span class="p">}</span>
        <span class="k">echo</span> <span class="s1">'&lt;/ul&gt;'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="c1">//the form has been posted without, so save it</span>
        <span class="c1">//notice the use of mysql_real_escape_string, keep everything safe!</span>
        <span class="c1">//also notice the sha1 function which hashes the password</span>
        <span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"INSERT INTO
                    users(user_name, user_pass, user_email ,user_date, user_level)
                VALUES('"</span> <span class="mf">.</span> <span class="nb">mysql_real_escape_string</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_name'</span><span class="p">])</span> <span class="mf">.</span> <span class="s2">"',
                       '"</span> <span class="mf">.</span> <span class="nb">sha1</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_pass'</span><span class="p">])</span> <span class="mf">.</span> <span class="s2">"',
                       '"</span> <span class="mf">.</span> <span class="nb">mysql_real_escape_string</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_email'</span><span class="p">])</span> <span class="mf">.</span> <span class="s2">"',
                        NOW(),
                        0)"</span><span class="p">;</span>
                         
        <span class="nv">$result</span> <span class="o">=</span> <span class="nb">mysql_query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$result</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//something went wrong, display the error</span>
            <span class="k">echo</span> <span class="s1">'Something went wrong while registering. Please try again later.'</span><span class="p">;</span>
            <span class="c1">//echo mysql_error(); //debugging purposes, uncomment when needed</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">echo</span> <span class="s1">'Successfully registered. You can now &lt;a href="signin.php"&gt;sign in&lt;/a&gt; and start posting! :-)'</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
 
<span class="k">include</span> <span class="s1">'footer.php'</span><span class="p">;</span>
<span class="cp">?&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<p class="prompt-info"><strong>تحديث</strong>: إذا كنت تستخدم الإصدارات الحديثة وبالتالي mysqli استخدم الكود التالي بدلأ من الكود أعلاه</p>

<div class="language-php highlighter-rouge"><div class="code-header">
        <span data-label-text="PHP"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
</pre></td><td class="rouge-code"><pre>
<span class="cp">&lt;?php</span>
<span class="c1">//signup.php</span>
<span class="k">include</span> <span class="s1">'connect.php'</span><span class="p">;</span>
<span class="k">include</span> <span class="s1">'header.php'</span><span class="p">;</span>
 
<span class="k">echo</span> <span class="s1">'&lt;h3&gt;Sign up&lt;/h3&gt;'</span><span class="p">;</span>
 
<span class="k">if</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'REQUEST_METHOD'</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">'POST'</span><span class="p">)</span>
<span class="p">{</span>
    <span class="cm">/*the form hasn't been posted yet, display it
      note that the action="" will cause the form to post to the same page it is on */</span>
    <span class="k">echo</span> <span class="s1">'&lt;form method="post" action=""&gt;
        Username: &lt;input type="text" name="user_name" /&gt;
        Password: &lt;input type="password" name="user_pass"&gt;
        Password again: &lt;input type="password" name="user_pass_check"&gt;
        E-mail: &lt;input type="email" name="user_email"&gt;
        &lt;input type="submit" value="submit" /&gt;
     &lt;/form&gt;'</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    <span class="cm">/* so, the form has been posted, we'll process the data in three steps:
        1.  Check the data
        2.  Let the user refill the wrong fields (if necessary)
        3.  Save the data 
    */</span>
    <span class="nv">$errors</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span> <span class="cm">/* declare the array for later use */</span>
     
    <span class="k">if</span><span class="p">(</span><span class="k">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_name'</span><span class="p">]))</span>
    <span class="p">{</span>
        <span class="c1">//the user name exists</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">ctype_alnum</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_name'</span><span class="p">]))</span>
        <span class="p">{</span>
            <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'The username can only contain letters and digits.'</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_name'</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">30</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'The username cannot be longer than 30 characters.'</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'The username field must not be empty.'</span><span class="p">;</span>
    <span class="p">}</span>
     
     
    <span class="k">if</span><span class="p">(</span><span class="k">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_pass'</span><span class="p">]))</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_pass'</span><span class="p">]</span> <span class="o">!=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_pass_check'</span><span class="p">])</span>
        <span class="p">{</span>
            <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'The two passwords did not match.'</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'The password field cannot be empty.'</span><span class="p">;</span>
    <span class="p">}</span>
     
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$errors</span><span class="p">))</span> <span class="cm">/*check for an empty array, if there are errors, they're in this array (note the ! operator)*/</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="s1">'Uh-oh.. a couple of fields are not filled in correctly..'</span><span class="p">;</span>
        <span class="k">echo</span> <span class="s1">'&lt;ul&gt;'</span><span class="p">;</span>
        <span class="k">foreach</span><span class="p">(</span><span class="nv">$errors</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span> <span class="cm">/* walk through the array so all the errors get displayed */</span>
        <span class="p">{</span>
            <span class="k">echo</span> <span class="s1">'&lt;li&gt;'</span> <span class="mf">.</span> <span class="nv">$value</span> <span class="mf">.</span> <span class="s1">'&lt;/li&gt;'</span><span class="p">;</span> <span class="cm">/* this generates a nice error list */</span>
        <span class="p">}</span>
        <span class="k">echo</span> <span class="s1">'&lt;/ul&gt;'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="c1">//the form has been posted without, so save it</span>
        <span class="c1">//notice the use of mysql_real_escape_string, keep everything safe!</span>
        <span class="c1">//also notice the sha1 function which hashes the password</span>
                    <span class="nv">$conn</span> <span class="o">=</span> <span class="nb">mysqli_connect</span><span class="p">(</span><span class="s2">"localhost"</span><span class="p">,</span><span class="s2">"root"</span><span class="p">,</span><span class="s2">"Stccpe+2009"</span><span class="p">,</span><span class="s2">"php"</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nf">mysqli_connect_errno</span><span class="p">())</span>
  <span class="p">{</span>
  <span class="k">echo</span> <span class="s2">"Failed to connect to MySQL: "</span> <span class="mf">.</span> <span class="nf">mysqli_connect_error</span><span class="p">();</span>
  <span class="p">}</span> 
        <span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"INSERT INTO
                    users(user_name, user_pass, user_email ,user_date, user_level)
                VALUES('"</span> <span class="mf">.</span> <span class="nf">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$conn</span><span class="p">,</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_name'</span><span class="p">])</span> <span class="mf">.</span> <span class="s2">"',
                       '"</span> <span class="mf">.</span> <span class="nb">sha1</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_pass'</span><span class="p">])</span> <span class="mf">.</span> <span class="s2">"',
                       '"</span> <span class="mf">.</span> <span class="nf">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$conn</span><span class="p">,</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_email'</span><span class="p">])</span> <span class="mf">.</span> <span class="s2">"',
                        NOW(),
                        0)"</span><span class="p">;</span>
   
        <span class="nv">$result</span> <span class="o">=</span> <span class="nf">mysqli_query</span><span class="p">(</span><span class="nv">$conn</span><span class="p">,</span><span class="nv">$sql</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$result</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//something went wrong, display the error</span>
            <span class="k">echo</span> <span class="s1">'Something went wrong while registering. Please try again later.'</span><span class="p">;</span>
            <span class="c1">//echo mysql_error(); //debugging purposes, uncomment when needed</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">echo</span> <span class="s1">'Successfully registered. You can now &lt;a href="signin.php"&gt;sign in&lt;/a&gt; and start posting! :-)'</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
 
<span class="k">include</span> <span class="s1">'footer.php'</span><span class="p">;</span>
<span class="cp">?&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<p>العديد من التوضيحات ستجدها في التعليقات الموضوعة ضمن الكود، لذا تأكد من قراءتها. معالجة البيانات تتم على ثلاثة مراحل:</p>

<h3 id="التأكد-من-البيانات"><span class="me-2">التأكد من البيانات</span><a href="#التأكد-من-البيانات" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h3>

<p>اذا لم تكن البيانات صحيحة ومعبئة بشكل كامل، اعرض النموذج مرة أخرى.
اذا كانت جميع البيانات صحيحة ومعبئة، احفظ البيانات في قاعدة البيانات.</p>

<p>(ماذا تقصد بالتأكد من صحة البيانات اذا كانت البيانات تُدخل ﻷول مرة؟ أقصد بذلك أن هناك حقل مثلاً ليضع المستخدم بريده الإلكتروني، يتم تعريف هذا الحقل بلغة <code class="language-plaintext highlighter-rouge">html</code> على أنه بريد إلكتروني، يجب أن يحوي على <code class="language-plaintext highlighter-rouge">@</code> و نقطة ثم كوم أو نت أو أياً كان، إذا لم تكن البيانات المدخلة في هذا الحقل بالشكل المذكور، فالمستخدم في الواقع لم يدخل بريد إلكتروني فعلاً، وهناك بالتالي بيانات غير صحيحة في النموذج)</p>

<p>الجزء المتعلق بـ php على كل حال يشرح نفسه بنفسه، يبقى تعليمات SQL التي تحتاج بعض الشرح.</p>

<div class="language-sql highlighter-rouge"><div class="code-header">
        <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>
<span class="k">INSERT</span> <span class="k">INTO</span>
       <span class="n">users</span><span class="p">(</span><span class="n">user_name</span><span class="p">,</span> <span class="n">user_pass</span><span class="p">,</span> <span class="n">user_email</span> <span class="p">,</span><span class="n">user_date</span><span class="p">,</span> <span class="n">user_level</span><span class="p">)</span>
<span class="k">VALUES</span><span class="p">(</span><span class="s1">'" . mysql_real_escape_string($_POST['</span><span class="n">user_name</span><span class="s1">']) . "'</span><span class="p">,</span>
       <span class="s1">'" . sha1($_POST['</span><span class="n">user_pass</span><span class="s1">']) . "'</span><span class="p">,</span>
       <span class="s1">'" . mysql_real_escape_string($_POST['</span><span class="n">user_email</span><span class="s1">']) . "'</span><span class="p">,</span>
       <span class="n">NOW</span><span class="p">(),</span> 
       <span class="mi">0</span><span class="p">);</span>

</pre></td></tr></tbody></table></code></div></div>

<p>في السطر الأول لدينا عبارة <code class="language-plaintext highlighter-rouge">INSERT INTO</code> التي تستخدم لإضافة بيانات لقاعدة البيانات، وتم تحديد اسم الجدول في السطر الثاني. الكلمات التي بين قوسين تحدد أسماء الأعمدة التي نريد إدراج البيانات لها. عبارة VALUES تُخبر قاعدة البيانات أننا انتهينا من تحديد أسماء الأعمدة وجاء وقت تحديد القيم التي ستُضاف لهذه الأعمدة. ولدينا شيئ جديد هنا: <code class="language-plaintext highlighter-rouge">mysql_real_escape_string</code>. تستخدم هذه التعليمة لحماية بيانات المستخدم أثناء إرساله للنموذج، ويجب أن تُستخدم دائماً باستثاء بعض الحالات النادرة. السكريبتات التي لا تستخدم هذه التعليمة يكون اختراقها والوصول لبيانات النموذج المرسلة سهل جداً، فلا تخاطر بذلك واستخدم عبارة <code class="language-plaintext highlighter-rouge">mysql_real_escape_string()</code>.</p>

<blockquote class="prompt-warning">
  <p>إيّاك أن تُدرج كلمة السر في قاعدة البيانات كما هي. يجب عليك دائماً تشفيرها.</p>
</blockquote>

<p>كما رأيت ، لقد قمنا باستخدام عبارة <code class="language-plaintext highlighter-rouge">sha1()</code> لتشفير كلمة سر المستخدم قبل حفظها في قاعدة البيانات، تذكر دائماً عمل هذه الخطوة في كل نموذج تقوم بعمله ويحوي على كلمة سر. فلو فرضنا أن أحد المخترقين قام بالوصول لقاعدة البيانات، وكانت كلمات السر غير مشفرة، فسيصبح بإمكانه الولوج لحساب أي مستخدم أو أي مدير في المنتدى وعمل ما يحلو له، أما لو كانت كلمات السر مشفرة فلن يتمكن من فعل ذلك قبل أن يفك تشفيرهم، وهذا مستحيل تقريباً .</p>

<blockquote class="prompt-info">
  <p>من الممكن استخدام أي نوع تشفير آخر بدلاً من <code class="language-plaintext highlighter-rouge">sha1()</code> ، مثل <code class="language-plaintext highlighter-rouge">md5()</code>. أنا استخدم النوع <code class="language-plaintext highlighter-rouge">sha1()</code> ﻷن المقاييس أثبتت أن هذا النوع أسرع بقليل.</p>
</blockquote>

<p>اذا نجحت عملية الاشتراك فستحصل على التالي</p>

<p><a href="/assets/3.png" class="popup img-link  shimmer"><img src="/assets/3.png" alt="كيفية عمل منتدى باستخدام php و MySQL من الصفر-3" loading="lazy"></a></p>

<p>قم بتحديث صفحة قاعدة البيانات في phpMyAdmin ، يجب أن ترى تسجيلاً جديداً في جدول المستخدمين users</p>

<h2 id="سادساً-إضافة-التفعيل-ومستوى-المستخدم"><span class="me-2">سادساً: إضافة التفعيل ومستوى المستخدم</span><a href="#سادساً-إضافة-التفعيل-ومستوى-المستخدم" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h2>

<p>إن من المزايا الهامة في المنتدى هو الفرق بين المستخدم العادي والمدير/المشرف. وبما أننا نناقش هنا منتجى صغير وبسيط وأن إضافة مزايا سيأخذ وقتاً طويلاً، فسنركز هنا على عملية تسجيل الدخول وإضافة بعض المزايا للمدراء مثل إضافة تصنيفات جديدة وإغلاق نقاش.</p>

<p>والآن بعد إكمال الخطوة السابقة، سنقوم بجعل الحساب الذي أنشأته للتو حساب مدير. اذهب لـ phpMyAdmin واضغط على جدول المستخدمين users ثم اضغط على خيار Browse . سيظهر لك الحساب الذي أنشأته، اضغط على أيقونة التعديل edit وقم بتغيير قيمة الحقل <code class="language-plaintext highlighter-rouge">user_level</code> من 0 إلى 1 .</p>

<p>حالياً لن تلاحظ أي فرق في المنتدى، ولكن عندما نضيف مزايا المدير سيصبح هناك فروقات في الصلاحيات بين الحساب العادي وهذا الحساب.</p>

<p><strong>عملية تسجيل الدخول تعمل كالتالي:</strong></p>

<ul>
  <li>
    <p>يقوم الزائر بإدخال بيانات المستخدم ويرسل النموذج.</p>
  </li>
  <li>
    <p>إذا كان اسم المستخدم وكلمة السر المدخلين صحيحين، فيمكن الآن بدء الجلسة (session)
اذا كان اسم المستخدم أو كلمة المرور غير صحيحين، نقوم بإظهار النموذج مرة أخرى مع رسالة خطأ.</p>
  </li>
</ul>

<p><a href="/assets/6.png" class="popup img-link  shimmer"><img src="/assets/6.png" alt="كيفية عمل منتدى باستخدام php و MySQL من الصفر-4" loading="lazy"></a></p>

<p>بالأسفل ملف تسجيل الدخول signin.php . اطلع على التعليقات ضمن الكود لفهم ما يجري</p>

<div class="language-php highlighter-rouge"><div class="code-header">
        <span data-label-text="PHP"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
</pre></td><td class="rouge-code"><pre>
<span class="cp">&lt;?php</span>
<span class="c1">//signin.php</span>
<span class="k">include</span> <span class="s1">'connect.php'</span><span class="p">;</span>
<span class="k">include</span> <span class="s1">'header.php'</span><span class="p">;</span>
 
<span class="k">echo</span> <span class="s1">'&lt;h3&gt;Sign in&lt;/h3&gt;'</span><span class="p">;</span>
 
<span class="c1">//first, check if the user is already signed in. If that is the case, there is no need to display this page</span>
<span class="k">if</span><span class="p">(</span><span class="k">isset</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'signed_in'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'signed_in'</span><span class="p">]</span> <span class="o">==</span> <span class="kc">true</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'You are already signed in, you can &lt;a href="signout.php"&gt;sign out&lt;/a&gt; if you want.'</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'REQUEST_METHOD'</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">'POST'</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="cm">/*the form hasn't been posted yet, display it
          note that the action="" will cause the form to post to the same page it is on */</span>
        <span class="k">echo</span> <span class="s1">'&lt;form method="post" action=""&gt;
            Username: &lt;input type="text" name="user_name" /&gt;
            Password: &lt;input type="password" name="user_pass"&gt;
            &lt;input type="submit" value="Sign in" /&gt;
         &lt;/form&gt;'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="cm">/* so, the form has been posted, we'll process the data in three steps:
            1.  Check the data
            2.  Let the user refill the wrong fields (if necessary)
            3.  Varify if the data is correct and return the correct response
        */</span>
        <span class="nv">$errors</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span> <span class="cm">/* declare the array for later use */</span>
         
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_name'</span><span class="p">]))</span>
        <span class="p">{</span>
            <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'The username field must not be empty.'</span><span class="p">;</span>
        <span class="p">}</span>
         
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_pass'</span><span class="p">]))</span>
        <span class="p">{</span>
            <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'The password field must not be empty.'</span><span class="p">;</span>
        <span class="p">}</span>
         
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$errors</span><span class="p">))</span> <span class="cm">/*check for an empty array, if there are errors, they're in this array (note the ! operator)*/</span>
        <span class="p">{</span>
            <span class="k">echo</span> <span class="s1">'Uh-oh.. a couple of fields are not filled in correctly..'</span><span class="p">;</span>
            <span class="k">echo</span> <span class="s1">'&lt;ul&gt;'</span><span class="p">;</span>
            <span class="k">foreach</span><span class="p">(</span><span class="nv">$errors</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span> <span class="cm">/* walk through the array so all the errors get displayed */</span>
            <span class="p">{</span>
                <span class="k">echo</span> <span class="s1">'&lt;li&gt;'</span> <span class="mf">.</span> <span class="nv">$value</span> <span class="mf">.</span> <span class="s1">'&lt;/li&gt;'</span><span class="p">;</span> <span class="cm">/* this generates a nice error list */</span>
            <span class="p">}</span>
            <span class="k">echo</span> <span class="s1">'&lt;/ul&gt;'</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="c1">//the form has been posted without errors, so save it</span>
            <span class="c1">//notice the use of mysql_real_escape_string, keep everything safe!</span>
            <span class="c1">//also notice the sha1 function which hashes the password</span>
            <span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"SELECT 
                        user_id,
                        user_name,
                        user_level
                    FROM
                        users
                    WHERE
                        user_name = '"</span> <span class="mf">.</span> <span class="nb">mysql_real_escape_string</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_name'</span><span class="p">])</span> <span class="mf">.</span> <span class="s2">"'
                    AND
                        user_pass = '"</span> <span class="mf">.</span> <span class="nb">sha1</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_pass'</span><span class="p">])</span> <span class="mf">.</span> <span class="s2">"'"</span><span class="p">;</span>
                         
            <span class="nv">$result</span> <span class="o">=</span> <span class="nb">mysql_query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$result</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="c1">//something went wrong, display the error</span>
                <span class="k">echo</span> <span class="s1">'Something went wrong while signing in. Please try again later.'</span><span class="p">;</span>
                <span class="c1">//echo mysql_error(); //debugging purposes, uncomment when needed</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="c1">//the query was successfully executed, there are 2 possibilities</span>
                <span class="c1">//1. the query returned data, the user can be signed in</span>
                <span class="c1">//2. the query returned an empty result set, the credentials were wrong</span>
                <span class="k">if</span><span class="p">(</span><span class="nb">mysql_num_rows</span><span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">echo</span> <span class="s1">'You have supplied a wrong user/password combination. Please try again.'</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">else</span>
                <span class="p">{</span>
                    <span class="c1">//set the $_SESSION['signed_in'] variable to TRUE</span>
                    <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'signed_in'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                     
                    <span class="c1">//we also put the user_id and user_name values in the $_SESSION, so we can use it at various pages</span>
                    <span class="k">while</span><span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nb">mysql_fetch_assoc</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span>
                    <span class="p">{</span>
                        <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'user_id'</span><span class="p">]</span>    <span class="o">=</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'user_id'</span><span class="p">];</span>
                        <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'user_name'</span><span class="p">]</span>  <span class="o">=</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'user_name'</span><span class="p">];</span>
                        <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'user_level'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'user_level'</span><span class="p">];</span>
                    <span class="p">}</span>
                     
                    <span class="k">echo</span> <span class="s1">'Welcome, '</span> <span class="mf">.</span> <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'user_name'</span><span class="p">]</span> <span class="mf">.</span> <span class="s1">'. &lt;a href="index.php"&gt;Proceed to the forum overview&lt;/a&gt;.'</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
 
<span class="k">include</span> <span class="s1">'footer.php'</span><span class="p">;</span>
<span class="cp">?&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<blockquote class="prompt-info">
  <p><strong>تحديث</strong>: إذا كنت تستخدم الإصدارات الحديثة وبالتالي mysqli استخدم الكود التالي بدلأ من الكود أعلاه</p>
</blockquote>

<div class="language-php highlighter-rouge"><div class="code-header">
        <span data-label-text="PHP"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
</pre></td><td class="rouge-code"><pre>

<span class="cp">&lt;?php</span>
<span class="c1">//signin.php</span>
<span class="k">include</span> <span class="s1">'connect.php'</span><span class="p">;</span>
<span class="k">include</span> <span class="s1">'header.php'</span><span class="p">;</span>
 
<span class="k">echo</span> <span class="s1">'&lt;h3&gt;Sign in&lt;/h3&gt;'</span><span class="p">;</span>
 
<span class="c1">//first, check if the user is already signed in. If that is the case, there is no need to display this page</span>
<span class="k">if</span><span class="p">(</span><span class="k">isset</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'signed_in'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'signed_in'</span><span class="p">]</span> <span class="o">==</span> <span class="kc">true</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'You are already signed in, you can &lt;a href="signout.php"&gt;sign out&lt;/a&gt; if you want.'</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'REQUEST_METHOD'</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">'POST'</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="cm">/*the form hasn't been posted yet, display it
          note that the action="" will cause the form to post to the same page it is on */</span>
        <span class="k">echo</span> <span class="s1">'&lt;form method="post" action=""&gt;
            Username: &lt;input type="text" name="user_name" /&gt;
            Password: &lt;input type="password" name="user_pass"&gt;
            &lt;input type="submit" value="Sign in" /&gt;
         &lt;/form&gt;'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="cm">/* so, the form has been posted, we'll process the data in three steps:
            1.  Check the data
            2.  Let the user refill the wrong fields (if necessary)
            3.  Varify if the data is correct and return the correct response
        */</span>
        <span class="nv">$errors</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span> <span class="cm">/* declare the array for later use */</span>
         
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_name'</span><span class="p">]))</span>
        <span class="p">{</span>
            <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'The username field must not be empty.'</span><span class="p">;</span>
        <span class="p">}</span>
         
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_pass'</span><span class="p">]))</span>
        <span class="p">{</span>
            <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'The password field must not be empty.'</span><span class="p">;</span>
        <span class="p">}</span>
         
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$errors</span><span class="p">))</span> <span class="cm">/*check for an empty array, if there are errors, they're in this array (note the ! operator)*/</span>
        <span class="p">{</span>
            <span class="k">echo</span> <span class="s1">'Uh-oh.. a couple of fields are not filled in correctly..'</span><span class="p">;</span>
            <span class="k">echo</span> <span class="s1">'&lt;ul&gt;'</span><span class="p">;</span>
            <span class="k">foreach</span><span class="p">(</span><span class="nv">$errors</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span> <span class="cm">/* walk through the array so all the errors get displayed */</span>
            <span class="p">{</span>
                <span class="k">echo</span> <span class="s1">'&lt;li&gt;'</span> <span class="mf">.</span> <span class="nv">$value</span> <span class="mf">.</span> <span class="s1">'&lt;/li&gt;'</span><span class="p">;</span> <span class="cm">/* this generates a nice error list */</span>
            <span class="p">}</span>
            <span class="k">echo</span> <span class="s1">'&lt;/ul&gt;'</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="c1">//the form has been posted without errors, so save it</span>
            <span class="c1">//notice the use of mysql_real_escape_string, keep everything safe!</span>
            <span class="c1">//also notice the sha1 function which hashes the password</span>
<span class="nv">$conn</span> <span class="o">=</span> <span class="nb">mysqli_connect</span><span class="p">(</span><span class="s2">"localhost"</span><span class="p">,</span><span class="s2">"root"</span><span class="p">,</span><span class="s2">"Stccpe+2009"</span><span class="p">,</span><span class="s2">"php"</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nf">mysqli_connect_errno</span><span class="p">())</span>
  <span class="p">{</span>
  <span class="k">echo</span> <span class="s2">"Failed to connect to MySQL: "</span> <span class="mf">.</span> <span class="nf">mysqli_connect_error</span><span class="p">();</span>
  <span class="p">}</span> 
            <span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"SELECT 
                        user_id,
                        user_name,
                        user_level
                    FROM
                        users
                    WHERE
                        user_name = '"</span> <span class="mf">.</span> <span class="nf">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$conn</span><span class="p">,</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_name'</span><span class="p">])</span> <span class="mf">.</span> <span class="s2">"'
                    AND
                        user_pass = '"</span> <span class="mf">.</span> <span class="nb">sha1</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'user_pass'</span><span class="p">])</span> <span class="mf">.</span> <span class="s2">"'"</span><span class="p">;</span>
                         
            <span class="nv">$result</span> <span class="o">=</span> <span class="nf">mysqli_query</span><span class="p">(</span><span class="nv">$conn</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$result</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="c1">//something went wrong, display the error</span>
                <span class="k">echo</span> <span class="s1">'Something went wrong while signing in. Please try again later.'</span><span class="p">;</span>
                <span class="c1">//echo mysql_error(); //debugging purposes, uncomment when needed</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="c1">//the query was successfully executed, there are 2 possibilities</span>
                <span class="c1">//1. the query returned data, the user can be signed in</span>
                <span class="c1">//2. the query returned an empty result set, the credentials were wrong</span>
                <span class="k">if</span><span class="p">(</span><span class="nf">mysqli_num_rows</span><span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">echo</span> <span class="s1">'You have supplied a wrong user/password combination. Please try again.'</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">else</span>
                <span class="p">{</span>
                    <span class="c1">//set the $_SESSION['signed_in'] variable to TRUE</span>
                    <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'signed_in'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                     
                    <span class="c1">//we also put the user_id and user_name values in the $_SESSION, so we can use it at various pages</span>
                    <span class="k">while</span><span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nf">mysqli_fetch_assoc</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span>
                    <span class="p">{</span>
                        <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'user_id'</span><span class="p">]</span>    <span class="o">=</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'user_id'</span><span class="p">];</span>
                        <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'user_name'</span><span class="p">]</span>  <span class="o">=</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'user_name'</span><span class="p">];</span>
                        <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'user_level'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'user_level'</span><span class="p">];</span>
                    <span class="p">}</span>
                     
                    <span class="k">echo</span> <span class="s1">'Welcome, '</span> <span class="mf">.</span> <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'user_name'</span><span class="p">]</span> <span class="mf">.</span> <span class="s1">'. &lt;a href="index.php"&gt;Proceed to the forum overview&lt;/a&gt;.'</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
 
<span class="k">include</span> <span class="s1">'footer.php'</span><span class="p">;</span>
<span class="cp">?&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<p>كما لاحظت، هذه هي تعليمات SQL في الكود السابق</p>

<div class="language-sql highlighter-rouge"><div class="code-header">
        <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre>
<span class="k">SELECT</span>
    <span class="n">user_id</span><span class="p">,</span>
    <span class="n">user_name</span><span class="p">,</span>
    <span class="n">user_level</span>
<span class="k">FROM</span>
    <span class="n">users</span>
<span class="k">WHERE</span>
    <span class="n">user_name</span> <span class="o">=</span> <span class="s1">'" . mysql_real_escape_string($_POST['</span><span class="n">user_name</span><span class="s1">']) . "'</span>
<span class="k">AND</span>
    <span class="n">user_pass</span> <span class="o">=</span> <span class="s1">'" . sha1($_POST['</span><span class="n">user_pass</span><span class="s1">'])

</span></pre></td></tr></tbody></table></code></div></div>

<p>من الواضح أننا نقوم بالتأكد من البيانات المدخلة إذا كانت لمستخدم موجود بالفعل. هناك العديد من السكريبتات التي تستخرج كلمة السر من قاعدة البيانات وتقارنها مع تلك المدخلة في النموذج باستخدام php. ولكن القيام بذلك بواسطة تعليمات SQL مباشرة سيجعل العملية أكثر أمناً حيث أن العملية هذه تحصل في وسط قاعدة البيانات وليس ضمن تطبيقنا الوب (منتدانا).</p>

<p>إذا قام المستخدم بتسجيل الدخول بشكل صحيح، فسنقوم بعمل بضعة أشياء:</p>

<div class="language-php highlighter-rouge"><div class="code-header">
        <span data-label-text="PHP"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre>
<span class="cp">&lt;?php</span>
<span class="c1">//set the $_SESSION['signed_in'] variable to TRUE</span>
<span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'signed_in'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="c1">//we also put the user_id and user_name values in the $_SESSION, so we can use it at various pages</span>
<span class="k">while</span><span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nb">mysql_fetch_assoc</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span>
<span class="p">{</span>
    <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'user_id'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'user_id'</span><span class="p">];</span>
    <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'user_name'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'user_name'</span><span class="p">];</span> 
<span class="p">}</span>
<span class="cp">?&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<p>في البداية، قمنا بإعطاء المتغير <code class="language-plaintext highlighter-rouge">$_SESSION['signed_in']</code>  القيمة <code class="language-plaintext highlighter-rouge">true</code> أي أننا بدأنا الجلسة والمستخدم الآن مسجل الدخول. وسنقوم باستخدام هذا المتغير في صفحات أخرى للتأكد من أن المستخدم مسجل الدخول. أيضاً قمنا بوضع اسم المستخدم <code class="language-plaintext highlighter-rouge">username</code> ومعرفه <code class="language-plaintext highlighter-rouge">user_id</code> في المتغير <code class="language-plaintext highlighter-rouge">$_SESSION</code> للاستخدام في صفحات أخرى. أخيراً، سنقوم بعرض رابط لرئيسية المنتدى حيث يمكن للمستخدم البدء في الإبحار.</p>

<p>تسجيل الدخول بالطبع يتطلب وظيفة أخرى وهي تسجيل الخروج! في الواقع عملية تسجيل الخروج أسهل بكثير من عملية تسجيل الدخول، فبما أن جميع المعلومات مخزنة في متغيرات <code class="language-plaintext highlighter-rouge">$_SESSION</code> ، فكل ما علينا فعله هو إلغاء تعيينهم في هذا المتغير وعرض رسالة للمستخدم.</p>

<p>الآن قمنا بضبط متغيرات <code class="language-plaintext highlighter-rouge">$_SESSION</code> ، يمكننا تحديد اذا كان شخص ما مسجل الدخول. دعنا نقوم الآن بعمل تغيير أخير على ملف الترويسة header.php
قم باستبدال التالي في الملف:</p>

<div class="language-html highlighter-rouge"><div class="code-header">
        <span data-label-text="HTML"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"userbar"</span><span class="nt">&gt;</span>Hello Example. Not you? Log out.<span class="nt">&lt;/div&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<p>إلى :</p>

<div class="language-php highlighter-rouge"><div class="code-header">
        <span data-label-text="PHP"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre>

<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"userbar"</span><span class="nt">&gt;</span>
<span class="cp">&lt;?php</span>
    <span class="nb">session_start</span><span class="p">();</span>
    <span class="k">if</span><span class="p">(</span><span class="k">isset</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'signed_in'</span><span class="p">]))</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="s1">'Hello'</span> <span class="mf">.</span> <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'user_name'</span><span class="p">]</span> <span class="mf">.</span> <span class="s1">'. Not you? &lt;a href="signout.php"&gt;Sign out&lt;/a&gt;'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="s1">'&lt;a href="signin.php"&gt;Sign in&lt;/a&gt; or &lt;a href="signup.php"&gt;create an account&lt;/a&gt;.'</span><span class="p">;</span>
    <span class="p">}</span>
<span class="cp">?&gt;</span>
<span class="nt">&lt;/div&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<p>وبالتالي، إذا قام المستخدم بتسجيل الدخول، فسيرى اسمه معروض في بداية الصفحة مع رابط لصفحة تسجيل الخروج.</p>

<p>نجحت طريقة التفعيل! والآن يبدو منتدانا كالتالي :</p>

<p><a href="/assets/4.png" class="popup img-link  shimmer"><img src="/assets/4.png" alt="كيفية عمل منتدى باستخدام php و MySQL من الصفر-5" loading="lazy"></a></p>

<h2 id="سابعاً-إنشاء-تصنيف"><span class="me-2">سابعاً: إنشاء تصنيف</span><a href="#سابعاً-إنشاء-تصنيف" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h2>

<p>نحن نريد إنشاء تصانيف في المنتدى، لذا دعنا ننشئ نموذج لهذه العملية</p>

<div class="language-html highlighter-rouge"><div class="code-header">
        <span data-label-text="HTML"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>
<span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"post"</span> <span class="na">action=</span><span class="s">""</span><span class="nt">&gt;</span>
    Category name: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"cat_name"</span> <span class="nt">/&gt;</span>
    Category description: <span class="nt">&lt;textarea</span> <span class="na">name=</span><span class="s">"cat_description"</span> <span class="nt">/&gt;&lt;/textarea&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Add category"</span> <span class="nt">/&gt;</span>
 <span class="nt">&lt;/form&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<p>تبدو هذه الخطوة مثل الخطوة الرابعة (اشتراك مستخدم). لذا لن أقوم بالشرح هنا ، فبما أنك متابع للخطوات فستكون قادراً على فهم الأمور بشكل سريع.</p>

<p>سنقوم تضمين النموذج في الأعلى ضمن صفحة إنشاء تصنيف :</p>

<div class="language-php highlighter-rouge"><div class="code-header">
        <span data-label-text="PHP"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
</pre></td><td class="rouge-code"><pre>
<span class="cp">&lt;?php</span>
<span class="c1">//create_cat.php</span>
<span class="k">include</span> <span class="s1">'connect.php'</span><span class="p">;</span>
 
<span class="k">if</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'REQUEST_METHOD'</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">'POST'</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//the form hasn't been posted yet, display it</span>
    <span class="k">echo</span> <span class="s1">'&lt;form method='</span><span class="n">post</span><span class="s1">' action=''&gt;
        Category name: &lt;input type='</span><span class="n">text</span><span class="s1">' name='</span><span class="n">cat_name</span><span class="s1">' /&gt;
        Category description: &lt;textarea name='</span><span class="n">cat_description</span><span class="s1">' /&gt;&lt;/textarea&gt;
        &lt;input type='</span><span class="n">submit</span><span class="s1">' value='</span><span class="nc">Add</span> <span class="n">category</span><span class="s1">' /&gt;
     &lt;/form&gt;'</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    <span class="c1">//the form has been posted, so save it</span>
    <span class="nv">$sql</span> <span class="o">=</span> <span class="n">ìINSERT</span> <span class="no">INTO</span> <span class="nf">categories</span><span class="p">(</span><span class="n">cat_name</span><span class="p">,</span> <span class="n">cat_description</span><span class="p">)</span>
       <span class="nf">VALUES</span><span class="p">(</span><span class="s1">''</span> <span class="mf">.</span> <span class="nb">mysql_real_escape_string</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'cat_name'</span><span class="p">])</span> <span class="mf">.</span> <span class="n">ì</span><span class="s1">',
             '' . mysql_real_escape_string($_POST['</span><span class="n">cat_description</span><span class="s1">']) . ì'</span><span class="p">)</span><span class="s1">';
    $result = mysql_query($sql);
    if(!$result)
    {
        //something went wrong, display the error
        echo '</span><span class="nc">Error</span><span class="s1">' . mysql_error();
    }
    else
    {
        echo '</span><span class="k">New</span> <span class="nc">category</span> <span class="n">successfully</span> <span class="n">added</span><span class="mf">.</span><span class="err">'</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<p>وكما ترى، لقد بدأنا السكريبت بفحص السيرفر $_SERVER ، بعد التأكد من أن المستخدم لديه صلاحيات المدير، والمطلوبة لإنشاء تصنيف، يتم عرض النموذج إذا لم يتم تعبئته وإرساله سابقاً، وإذا تم إرساله، يتم حفظ القيم. مرة أخرى ، يتم تحضير تعليمة SQL وتنفيذها.</p>

<p><a href="/assets/5.png" class="popup img-link  shimmer"><img src="/assets/5.png" alt="كيفية عمل منتدى باستخدام php و MySQL من الصفر-6" loading="lazy"></a></p>

<h2 id="ثامناً-إضافة-تصنيفات-للصفحة-الرئيسية-indexphp"><span class="me-2">ثامناً: إضافة تصنيفات للصفحة الرئيسية index.php</span><a href="#ثامناً-إضافة-تصنيفات-للصفحة-الرئيسية-indexphp" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h2>

<p>لقد قمنا بإنشاء بعض التصنيفات، ويمكننا الآن عرضهم في الصفحة الرئيسية. دعنا نضيف تعليمة SQL التالية لمنظقة المحتوى في الصفحة الرئيسية index.php</p>

<div class="language-sql highlighter-rouge"><div class="code-header">
        <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>
<span class="k">SELECT</span>
    <span class="n">categories</span><span class="p">.</span><span class="n">cat_id</span><span class="p">,</span>
    <span class="n">categories</span><span class="p">.</span><span class="n">cat_name</span><span class="p">,</span>
    <span class="n">categories</span><span class="p">.</span><span class="n">cat_description</span><span class="p">,</span>
<span class="k">FROM</span>
    <span class="n">categories</span>

</pre></td></tr></tbody></table></code></div></div>

<p>تقوم هذه التعليمة بتحديد جميع التصنيفات وأسمائهم ووصفهم من جدول التصنيفات. سنحتاج الآن لبضعة أسطر php لعرض النتائج. إذا قمنا بإضافة التعليمة كما فعلنا في الخطوات السابقة، فسيبدو الكود (الكود النهائي للصفحة الرئيسية index.php) على الشكل:</p>

<div class="language-php highlighter-rouge"><div class="code-header">
        <span data-label-text="PHP"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
</pre></td><td class="rouge-code"><pre>
<span class="cp">&lt;?php</span>
<span class="c1">//index.php</span>
<span class="k">include</span> <span class="s1">'connect.php'</span><span class="p">;</span>
<span class="k">include</span> <span class="s1">'header.php'</span><span class="p">;</span>
 
<span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"SELECT
            cat_id,
            cat_name,
            cat_description,
        FROM
            categories"</span><span class="p">;</span>
 
<span class="nv">$result</span> <span class="o">=</span> <span class="nb">mysql_query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>
 
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$result</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'The categories could not be displayed, please try again later.'</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nb">mysql_num_rows</span><span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="s1">'No categories defined yet.'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="c1">//prepare the table</span>
        <span class="k">echo</span> <span class="s1">'&lt;table border="1"&gt;
              &lt;tr&gt;
                &lt;th&gt;Category&lt;/th&gt;
                &lt;th&gt;Last topic&lt;/th&gt;
              &lt;/tr&gt;'</span><span class="p">;</span> 
             
        <span class="k">while</span><span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nb">mysql_fetch_assoc</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span>
        <span class="p">{</span>               
            <span class="k">echo</span> <span class="s1">'&lt;tr&gt;'</span><span class="p">;</span>
                <span class="k">echo</span> <span class="s1">'&lt;td class="leftpart"&gt;'</span><span class="p">;</span>
                    <span class="k">echo</span> <span class="s1">'&lt;h3&gt;&lt;a href="category.php?id"&gt;'</span> <span class="mf">.</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'cat_name'</span><span class="p">]</span> <span class="mf">.</span> <span class="s1">'&lt;/a&gt;&lt;/h3&gt;'</span> <span class="mf">.</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'cat_description'</span><span class="p">];</span>
                <span class="k">echo</span> <span class="s1">'&lt;/td&gt;'</span><span class="p">;</span>
                <span class="k">echo</span> <span class="s1">'&lt;td class="rightpart"&gt;'</span><span class="p">;</span>
                            <span class="k">echo</span> <span class="s1">'&lt;a href="topic.php?id="&gt;Topic subject&lt;/a&gt; at 10-10'</span><span class="p">;</span>
                <span class="k">echo</span> <span class="s1">'&lt;/td&gt;'</span><span class="p">;</span>
            <span class="k">echo</span> <span class="s1">'&lt;/tr&gt;'</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
 
<span class="k">include</span> <span class="s1">'footer.php'</span><span class="p">;</span>
<span class="cp">?&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<p><strong>تحديث</strong>: لـ php7 واستخدام mysqli، يرجى استبدال السطر التالي الموجود في بداية الكود $result = mysql_query($sql); إلى:</p>

<div class="language-php highlighter-rouge"><div class="code-header">
        <span data-label-text="PHP"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>
<span class="nv">$conn</span> <span class="o">=</span> <span class="nb">mysqli_connect</span><span class="p">(</span><span class="s2">"localhost"</span><span class="p">,</span><span class="s2">"root"</span><span class="p">,</span><span class="s2">"password"</span><span class="p">,</span><span class="s2">"DatabaseName"</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nf">mysqli_connect_errno</span><span class="p">())</span>
  <span class="p">{</span>
  <span class="k">echo</span> <span class="s2">"Failed to connect to MySQL: "</span> <span class="mf">.</span> <span class="nf">mysqli_connect_error</span><span class="p">();</span>
  <span class="p">}</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nf">mysqli_query</span><span class="p">(</span><span class="nv">$conn</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

</pre></td></tr></tbody></table></code></div></div>

<p>لاحظ كيف استخدمنا حقل cat_id لإنشاء روابط لصفحة category.php . جميع الروابط لهذه السفحة ستبدو على الشكل:</p>

<div class="language-plaintext highlighter-rouge"><div class="code-header">
        <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>	category.php?cat_id=x
</pre></td></tr></tbody></table></code></div></div>

<p>حيث x يمكن أن يكون أي قيمة عددية بحسب التصنيف .</p>

<h2 id="تاسعاً-إنشاء-موضوع"><span class="me-2">تاسعاً: إنشاء موضوع</span><a href="#تاسعاً-إنشاء-موضوع" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h2>

<p>سنقوم في هذه الخطوة بجمع التقنيات التي تعلمناها في الخطوات السابقة. حيث سنقوم بالتأكد من أن المستخدم مسجل الدخول، سنقوم باستخدام تعليمة SQL لإنشاء موضوع ، وسننشئ نموذج html بسيط كواجهة مستخدم لإنشاء الموضوع.</p>

<p>إن هيكلية ملف إنشاء الموضوع create_topic.php من الصعب شرحها ضمن قائمة أو ما شابه، لذا قمت بكتابة شرح للهيكل العام للملف كتوضيح:</p>

<div class="language-php highlighter-rouge"><div class="code-header">
        <span data-label-text="PHP"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre>
<span class="cp">&lt;?php</span>
<span class="k">if</span><span class="p">(</span><span class="n">user</span> <span class="n">is</span> <span class="n">signed</span> <span class="n">in</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//the user is not signed in</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    <span class="c1">//the user is signed in</span>
    <span class="k">if</span><span class="p">(</span><span class="n">form</span> <span class="n">has</span> <span class="n">not</span> <span class="n">been</span> <span class="n">posted</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">//show form</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="c1">//process form</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<p>وهذا هو الكود الحقيقي لهذا القسم من المنتدى ، راجع الشرح أسفل الكود لفهم ما يجري .</p>

<div class="language-php highlighter-rouge"><div class="code-header">
        <span data-label-text="PHP"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
</pre></td><td class="rouge-code"><pre>
<span class="cp">&lt;?php</span>
<span class="c1">//create_topic.php</span>
<span class="k">include</span> <span class="s1">'connect.php'</span><span class="p">;</span>
<span class="k">include</span> <span class="s1">'header.php'</span><span class="p">;</span>
 
<span class="k">echo</span> <span class="s1">'&lt;h2&gt;Create a topic&lt;/h2&gt;'</span><span class="p">;</span>
<span class="k">if</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'signed_in'</span><span class="p">]</span> <span class="o">==</span> <span class="kc">false</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//the user is not signed in</span>
    <span class="k">echo</span> <span class="s1">'Sorry, you have to be &lt;a href="/forum/signin.php"&gt;signed in&lt;/a&gt; to create a topic.'</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    <span class="c1">//the user is signed in</span>
    <span class="k">if</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'REQUEST_METHOD'</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">'POST'</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">//the form hasn't been posted yet, display it</span>
        <span class="c1">//retrieve the categories from the database for use in the dropdown</span>
        <span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"SELECT
                    cat_id,
                    cat_name,
                    cat_description
                FROM
                    categories"</span><span class="p">;</span>
         
        <span class="nv">$result</span> <span class="o">=</span> <span class="nb">mysql_query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>
         
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$result</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//the query failed, uh-oh :-(</span>
            <span class="k">echo</span> <span class="s1">'Error while selecting from database. Please try again later.'</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nb">mysql_num_rows</span><span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="c1">//there are no categories, so a topic can't be posted</span>
                <span class="k">if</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'user_level'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">echo</span> <span class="s1">'You have not created categories yet.'</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">else</span>
                <span class="p">{</span>
                    <span class="k">echo</span> <span class="s1">'Before you can post a topic, you must wait for an admin to create some categories.'</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
         
                <span class="k">echo</span> <span class="s1">'&lt;form method="post" action=""&gt;
                    Subject: &lt;input type="text" name="topic_subject" /&gt;
                    Category:'</span><span class="p">;</span> 
                 
                <span class="k">echo</span> <span class="s1">'&lt;select name="topic_cat"&gt;'</span><span class="p">;</span>
                    <span class="k">while</span><span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nb">mysql_fetch_assoc</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span>
                    <span class="p">{</span>
                        <span class="k">echo</span> <span class="s1">'&lt;option value="'</span> <span class="mf">.</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'cat_id'</span><span class="p">]</span> <span class="mf">.</span> <span class="s1">'"&gt;'</span> <span class="mf">.</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'cat_name'</span><span class="p">]</span> <span class="mf">.</span> <span class="s1">'&lt;/option&gt;'</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="k">echo</span> <span class="s1">'&lt;/select&gt;'</span><span class="p">;</span> 
                     
                <span class="k">echo</span> <span class="s1">'Message: &lt;textarea name="post_content" /&gt;&lt;/textarea&gt;
                    &lt;input type="submit" value="Create topic" /&gt;
                 &lt;/form&gt;'</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="c1">//start the transaction</span>
        <span class="nv">$query</span>  <span class="o">=</span> <span class="s2">"BEGIN WORK;"</span><span class="p">;</span>
        <span class="nv">$result</span> <span class="o">=</span> <span class="nb">mysql_query</span><span class="p">(</span><span class="nv">$query</span><span class="p">);</span>
         
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$result</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//Damn! the query failed, quit</span>
            <span class="k">echo</span> <span class="s1">'An error occured while creating your topic. Please try again later.'</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
     
            <span class="c1">//the form has been posted, so save it</span>
            <span class="c1">//insert the topic into the topics table first, then we'll save the post into the posts table</span>
            <span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"INSERT INTO 
                        topics(topic_subject,
                               topic_date,
                               topic_cat,
                               topic_by)
                   VALUES('"</span> <span class="mf">.</span> <span class="nb">mysql_real_escape_string</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'topic_subject'</span><span class="p">])</span> <span class="mf">.</span> <span class="s2">"',
                               NOW(),
                               "</span> <span class="mf">.</span> <span class="nb">mysql_real_escape_string</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'topic_cat'</span><span class="p">])</span> <span class="mf">.</span> <span class="s2">",
                               "</span> <span class="mf">.</span> <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'user_id'</span><span class="p">]</span> <span class="mf">.</span> <span class="s2">"
                               )"</span><span class="p">;</span>
                      
            <span class="nv">$result</span> <span class="o">=</span> <span class="nb">mysql_query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$result</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="c1">//something went wrong, display the error</span>
                <span class="k">echo</span> <span class="s1">'An error occured while inserting your data. Please try again later.'</span> <span class="mf">.</span> <span class="nb">mysql_error</span><span class="p">();</span>
                <span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"ROLLBACK;"</span><span class="p">;</span>
                <span class="nv">$result</span> <span class="o">=</span> <span class="nb">mysql_query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="c1">//the first query worked, now start the second, posts query</span>
                <span class="c1">//retrieve the id of the freshly created topic for usage in the posts query</span>
                <span class="nv">$topicid</span> <span class="o">=</span> <span class="nb">mysql_insert_id</span><span class="p">();</span>
                 
                <span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"INSERT INTO
                            posts(post_content,
                                  post_date,
                                  post_topic,
                                  post_by)
                        VALUES
                            ('"</span> <span class="mf">.</span> <span class="nb">mysql_real_escape_string</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'post_content'</span><span class="p">])</span> <span class="mf">.</span> <span class="s2">"',
                                  NOW(),
                                  "</span> <span class="mf">.</span> <span class="nv">$topicid</span> <span class="mf">.</span> <span class="s2">",
                                  "</span> <span class="mf">.</span> <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'user_id'</span><span class="p">]</span> <span class="mf">.</span> <span class="s2">"
                            )"</span><span class="p">;</span>
                <span class="nv">$result</span> <span class="o">=</span> <span class="nb">mysql_query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>
                 
                <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$result</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="c1">//something went wrong, display the error</span>
                    <span class="k">echo</span> <span class="s1">'An error occured while inserting your post. Please try again later.'</span> <span class="mf">.</span> <span class="nb">mysql_error</span><span class="p">();</span>
                    <span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"ROLLBACK;"</span><span class="p">;</span>
                    <span class="nv">$result</span> <span class="o">=</span> <span class="nb">mysql_query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">else</span>
                <span class="p">{</span>
                    <span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"COMMIT;"</span><span class="p">;</span>
                    <span class="nv">$result</span> <span class="o">=</span> <span class="nb">mysql_query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>
                     
                    <span class="c1">//after a lot of work, the query succeeded!</span>
                    <span class="k">echo</span> <span class="s1">'You have successfully created &lt;a href="topic.php?id='</span><span class="mf">.</span> <span class="nv">$topicid</span> <span class="mf">.</span> <span class="s1">'"&gt;your new topic&lt;/a&gt;.'</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
 
<span class="k">include</span> <span class="s1">'footer.php'</span><span class="p">;</span>
<span class="cp">?&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<p>سأناقش هذه الصفحة على قسمين: عرض النموذج ومعالجة النموذج.</p>

<h3 id="عرض-النموذج"><span class="me-2">عرض النموذج</span><a href="#عرض-النموذج" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h3>

<p>لعرض النموذج فإننا نبدأ بتعليمات html بسيطة، ولكن في الواقع هناك شيئ خاص، ﻷننا نستخدم قائمة منسدلة، هذه القائمة المنسدلة يتم تعبئتها من خلال بيانات موجودة في قاعدة البيانات، يتم استخراج تلك البيانات باستخدام تعليمات SQL :</p>

<div class="language-sql highlighter-rouge"><div class="code-header">
        <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>
<span class="k">SELECT</span>
    <span class="n">cat_id</span><span class="p">,</span>
    <span class="n">cat_name</span><span class="p">,</span>
    <span class="n">cat_description</span>
<span class="k">FROM</span>
    <span class="n">categories</span>

</pre></td></tr></tbody></table></code></div></div>

<p>أعتقد أن هذا هو الجزء الغير واضح هنا، والآن كما ترى هو مجرد كود بسيط .</p>

<h3 id="معالجة-النموذج"><span class="me-2">معالجة النموذج</span><a href="#معالجة-النموذج" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h3>

<p>عملية حفظ الموضوع تتضمن مرحلتين: حفظ الموضوع في جدول المواضيع ضمن قاعدة البيانات، وحفظ أول تعليق في جدول التعليقات. وهذا يتطلب شيئ متقدم نوعاً ما وخارج موضوعنا هنا تقريباً، وهو يدعى إجراء <code class="language-plaintext highlighter-rouge">transaction</code> ، ويُقصد به أننا نبدأ بتنفيذ أمر البدء ثم التراجع إذا كان هناك أخطاء في قاعدة البيانات أو إنهاء التنفيذ عندما يجري كل شيئ بشكل صحيح.</p>

<div class="language-php highlighter-rouge"><div class="code-header">
        <span data-label-text="PHP"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre>
<span class="cp">&lt;?php</span>
<span class="c1">//start the transaction</span>
<span class="nv">$query</span>  <span class="o">=</span> <span class="s2">"BEGIN WORK;"</span><span class="p">;</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nb">mysql_query</span><span class="p">(</span><span class="nv">$query</span><span class="p">);</span>
<span class="c1">//stop the transaction</span>
<span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"ROLLBACK;"</span><span class="p">;</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nb">mysql_query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>
<span class="c1">//commit the transaction</span>
<span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"COMMIT;"</span><span class="p">;</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nb">mysql_query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>
<span class="cp">?&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<p>أول تعليمة تستخدم لحفظ ابيانات هو تعليمة إنشاء موضوع، والتي تبدو على الشكل التالي :</p>

<div class="language-sql highlighter-rouge"><div class="code-header">
        <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre>
<span class="k">INSERT</span> <span class="k">INTO</span>
    <span class="n">topics</span><span class="p">(</span><span class="n">topic_subject</span><span class="p">,</span>
               <span class="n">topic_date</span><span class="p">,</span>
               <span class="n">topic_cat</span><span class="p">,</span>
               <span class="n">topic_by</span><span class="p">)</span>
<span class="k">VALUES</span><span class="p">(</span><span class="s1">'" . mysql_real_escape_string($_POST['</span><span class="n">topic_subject</span><span class="s1">']) . "'</span><span class="p">,</span>
       <span class="n">NOW</span><span class="p">(),</span>
       <span class="nv">" . mysql_real_escape_string($_POST['topic_cat']) . "</span><span class="p">,</span>
       <span class="nv">" . $_SESSION['user_id'] . "</span><span class="p">)</span>

</pre></td></tr></tbody></table></code></div></div>

<p>في البداية تم تعريف الحقول، ثم القيم ليتم إدراجها في الحقول. لقد رأيت مثل هذه التعليمات سابقاً، حيث أنها مجرد تعليمات يتم تأمينها استخدام العبارة <code class="language-plaintext highlighter-rouge">musql_real_escape_string()</code> . القيمة الثانية : <code class="language-plaintext highlighter-rouge">NOW()</code> هي وظيفة في <code class="language-plaintext highlighter-rouge">SQL</code> لإدارج الوقت الحالي. القيمة الثالثة هي التي لم ترها من قبل، وهي تشير إلى معرف id صالح لتصنيف ما. والقيمة الأخيرة تشير لمعرف id مستخدم موجود بالفعل، وهو في حالتنا هي قيمة المتغير <code class="language-plaintext highlighter-rouge">$_SESSION['user_id']</code>.  خيث تم مناقشة هذا المتغير خلال خطوة تسجيل الدخول .</p>

<p>إذا تم تنفيذ الكود بدون أخطاء، فيتم الانتقال للخطوة التالية. تذكر أننا ما زالنا نجري إجراءاً هنا <code class="language-plaintext highlighter-rouge">transaction</code> . إذا حصلنا على أخطاء فسنستخدم تعليمة <code class="language-plaintext highlighter-rouge">ROLLBACK</code>.</p>

<div class="language-sql highlighter-rouge"><div class="code-header">
        <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre>
<span class="k">INSERT</span> <span class="k">INTO</span>
        <span class="n">posts</span><span class="p">(</span><span class="n">post_content</span><span class="p">,</span>
        <span class="n">post_date</span><span class="p">,</span>
        <span class="n">post_topic</span><span class="p">,</span>
        <span class="n">post_by</span><span class="p">)</span>
<span class="k">VALUES</span>
        <span class="p">(</span><span class="s1">'" . mysql_real_escape_string($_POST['</span><span class="n">post_content</span><span class="s1">']) . "'</span><span class="p">,</span>
         <span class="n">NOW</span><span class="p">(),</span>
         <span class="nv">" . $topicid . "</span><span class="p">,</span>
         <span class="nv">" . $_SESSION['user_id'] . "</span><span class="p">)</span>

</pre></td></tr></tbody></table></code></div></div>

<p>إن أول شيئ نفعله هنا هو استخدام تعليمة <code class="language-plaintext highlighter-rouge">mysql_insert_id()</code> للحصول على آخر id تم توليده من حقل <code class="language-plaintext highlighter-rouge">topic_id</code> في جدول المواضيع. وكما وجدت في الخطوات الأولى، يتم توليد الـ <code class="language-plaintext highlighter-rouge">id</code> في قاعدة البيانات باستخدام تعليمة <code class="language-plaintext highlighter-rouge">auto_increment</code>.</p>

<p>ثم يتم إدراج المنشور في جدول المنشورات post table. تبدو هذه العملية مشابهة لعملية المواضيع، الفرق الوحيد بينهما هو أن المنشور يشير إلى الموضوع والموضوع يشير للتصنيف. لقد قررنا من البداية إنشاء تصميم بيانات جيد، وهذه هي النتيجة.</p>

<p><a href="/assets/7.png" class="popup img-link  shimmer"><img src="/assets/7.png" alt="كيفية عمل منتدى باستخدام php و MySQL من الصفر-7" loading="lazy"></a></p>

<h2 id="عاشراً-عرض-التصنيفات"><span class="me-2">عاشراً: عرض التصنيفات</span><a href="#عاشراً-عرض-التصنيفات" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h2>

<p>سوف نقوم بعمل صفحة عرض لتصنيف محدد. لقد أنشأنا تصنيفاً للتو ، ومن المفضل توفير إمكانية مشاهدة جميع المواضيع التي تتبع لهذا التصنيف. أولاً قم بإنشاء صفحة باسم category.php</p>

<p><strong>نحتاج هنا لعدة أمور:</strong></p>

<p>1.أمور نحتاجها لعرض التصنيف:</p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">cat_name</code> (اسم التصنيف)</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">cat_description</code> (وصف التصنيف)</p>
  </li>
</ul>

<p>2.أمور نحتاجها لعرض المواضيع ضمن ذلك التصنيف:</p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">topic_id</code>   (معرف الموضوع)</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">topic_subject</code>  (عنوان الموضوع)</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">topic_date</code>  (تاريخ الموضوع)</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">topic_cat</code>   (تصنيف الموضوع)</p>
  </li>
</ul>

<p>لنقم الآن بإنشاء تعليمتي SQL والتي تقوم باستخراج البيانات الني نريدها تحديداً من قاعدة البيانات</p>

<div class="language-sql highlighter-rouge"><div class="code-header">
        <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre>
<span class="k">SELECT</span>
    <span class="n">cat_id</span><span class="p">,</span>
    <span class="n">cat_name</span><span class="p">,</span>
    <span class="n">cat_description</span>
<span class="k">FROM</span>
    <span class="n">categories</span>
<span class="k">WHERE</span>
    <span class="n">cat_id</span> <span class="o">=</span> <span class="nv">" . mysql_real_escape_string($_GET['id'])

</span></pre></td></tr></tbody></table></code></div></div>

<p>تقوم التعليمة أعلاه باستخراج جميع التصنيفات من قاعدة البيانات</p>

<div class="language-sql highlighter-rouge"><div class="code-header">
        <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre>
<span class="k">SELECT</span> 
    <span class="n">topic_id</span><span class="p">,</span>
    <span class="n">topic_subject</span><span class="p">,</span>
    <span class="n">topic_date</span><span class="p">,</span>
    <span class="n">topic_cat</span>
<span class="k">FROM</span>
    <span class="n">topics</span>
<span class="k">WHERE</span>
    <span class="n">topic_cat</span> <span class="o">=</span> <span class="nv">" . mysql_real_escape_string($_GET['id'])

</span></pre></td></tr></tbody></table></code></div></div>

<p>والآن ، الكود الكامل لملف category.php سيكون على الشكل التالي</p>

<div class="language-php highlighter-rouge"><div class="code-header">
        <span data-label-text="PHP"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
</pre></td><td class="rouge-code"><pre>
<span class="cp">&lt;?php</span>
<span class="c1">//category.php</span>
<span class="k">include</span> <span class="s1">'connect.php'</span><span class="p">;</span>
<span class="k">include</span> <span class="s1">'header.php'</span><span class="p">;</span>
 
<span class="c1">//first select the category based on $_GET['cat_id']</span>
<span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"SELECT
            cat_id,
            cat_name,
            cat_description
        FROM
            categories
        WHERE
            cat_id = "</span> <span class="mf">.</span> <span class="nb">mysql_real_escape_string</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">'id'</span><span class="p">]);</span>
 
<span class="nv">$result</span> <span class="o">=</span> <span class="nb">mysql_query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>
 
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$result</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'The category could not be displayed, please try again later.'</span> <span class="mf">.</span> <span class="nb">mysql_error</span><span class="p">();</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nb">mysql_num_rows</span><span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="s1">'This category does not exist.'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="c1">//display category data</span>
        <span class="k">while</span><span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nb">mysql_fetch_assoc</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="k">echo</span> <span class="s1">'&lt;h2&gt;Topics in ′'</span> <span class="mf">.</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'cat_name'</span><span class="p">]</span> <span class="mf">.</span> <span class="s1">'′ category&lt;/h2&gt;'</span><span class="p">;</span>
        <span class="p">}</span>
     
        <span class="c1">//do a query for the topics</span>
        <span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"SELECT  
                    topic_id,
                    topic_subject,
                    topic_date,
                    topic_cat
                FROM
                    topics
                WHERE
                    topic_cat = "</span> <span class="mf">.</span> <span class="nb">mysql_real_escape_string</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">'id'</span><span class="p">]);</span>
         
        <span class="nv">$result</span> <span class="o">=</span> <span class="nb">mysql_query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>
         
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$result</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">echo</span> <span class="s1">'The topics could not be displayed, please try again later.'</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nb">mysql_num_rows</span><span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">echo</span> <span class="s1">'There are no topics in this category yet.'</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="c1">//prepare the table</span>
                <span class="k">echo</span> <span class="s1">'&lt;table border="1"&gt;
                      &lt;tr&gt;
                        &lt;th&gt;Topic&lt;/th&gt;
                        &lt;th&gt;Created at&lt;/th&gt;
                      &lt;/tr&gt;'</span><span class="p">;</span> 
                     
                <span class="k">while</span><span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nb">mysql_fetch_assoc</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span>
                <span class="p">{</span>               
                    <span class="k">echo</span> <span class="s1">'&lt;tr&gt;'</span><span class="p">;</span>
                        <span class="k">echo</span> <span class="s1">'&lt;td class="leftpart"&gt;'</span><span class="p">;</span>
                            <span class="k">echo</span> <span class="s1">'&lt;h3&gt;&lt;a href="topic.php?id='</span> <span class="mf">.</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'topic_id'</span><span class="p">]</span> <span class="mf">.</span> <span class="s1">'"&gt;'</span> <span class="mf">.</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'topic_subject'</span><span class="p">]</span> <span class="mf">.</span> <span class="s1">'&lt;/a&gt;&lt;h3&gt;'</span><span class="p">;</span>
                        <span class="k">echo</span> <span class="s1">'&lt;/td&gt;'</span><span class="p">;</span>
                        <span class="k">echo</span> <span class="s1">'&lt;td class="rightpart"&gt;'</span><span class="p">;</span>
                            <span class="k">echo</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'d-m-Y'</span><span class="p">,</span> <span class="nb">strtotime</span><span class="p">(</span><span class="nv">$row</span><span class="p">[</span><span class="s1">'topic_date'</span><span class="p">]));</span>
                        <span class="k">echo</span> <span class="s1">'&lt;/td&gt;'</span><span class="p">;</span>
                    <span class="k">echo</span> <span class="s1">'&lt;/tr&gt;'</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
 
<span class="k">include</span> <span class="s1">'footer.php'</span><span class="p">;</span>
<span class="cp">?&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<p>وهذه هي النتيجة النهائية لصفحة التصنيفات</p>

<p><a href="/assets/8.png" class="popup img-link  shimmer"><img src="/assets/8.png" alt="كيفية عمل منتدى باستخدام php و MySQL من الصفر-8" loading="lazy"></a></p>

<h2 id="الخطوة-11--عرض-المواضيع"><span class="me-2">الخطوة 11 : عرض المواضيع</span><a href="#الخطوة-11--عرض-المواضيع" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h2>

<p>إن تعليمات SQL في هذه الخطوة هي تعليمات معقدة. بالنسبة لكود php فسيكون كله مألوفاً لديك وشبيه بما سبق. لذا دعنا نلقي نظرة الآن على تعليمات SQL . حيث التعليمة الأولى تستخرج معلومات أساسية حول الموضوع:</p>

<div class="language-sql highlighter-rouge"><div class="code-header">
        <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre>
<span class="k">SELECT</span>
<span class="n">topic_id</span><span class="p">,</span>
<span class="n">topic_subject</span>
<span class="k">FROM</span>
<span class="n">topics</span>
<span class="k">WHERE</span>
<span class="n">topics</span><span class="p">.</span><span class="n">topic_id</span> <span class="o">=</span> <span class="nv">" . mysql_real_escape_string($_GET[
'id'])

</span></pre></td></tr></tbody></table></code></div></div>

<p>يتم عرض هذه المعلومات في رأس الجدول الذي سنستخدمه لعرض جميع البيانات. ثم سنستخرج جميع التعليقات على هذا الموضوع من قاعدة البيانات. التعليمة التالية تعطينا تماماً ما نريد:</p>

<div class="language-sql highlighter-rouge"><div class="code-header">
        <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre>
<span class="k">SELECT</span>
<span class="n">posts</span><span class="p">.</span><span class="n">post_topic</span><span class="p">,</span>
<span class="n">posts</span><span class="p">.</span><span class="n">post_content</span><span class="p">,</span>
<span class="n">posts</span><span class="p">.</span><span class="n">post_date</span><span class="p">,</span>
<span class="n">posts</span><span class="p">.</span><span class="n">post_by</span><span class="p">,</span>
<span class="n">users</span><span class="p">.</span><span class="n">user_id</span><span class="p">,</span>
<span class="n">users</span><span class="p">.</span><span class="n">user_name</span>
<span class="k">FROM</span>
<span class="n">posts</span>
<span class="k">LEFT</span> <span class="k">JOIN</span>
<span class="n">users</span>
<span class="k">ON</span>
<span class="n">posts</span><span class="p">.</span><span class="n">post_by</span> <span class="o">=</span> <span class="n">users</span><span class="p">.</span><span class="n">user_id</span>
<span class="k">WHERE</span>
<span class="n">posts</span><span class="p">.</span><span class="n">post_topic</span> <span class="o">=</span> <span class="nv">" . mysql_real_escape_string($_GET[
'id'])

</span></pre></td></tr></tbody></table></code></div></div>

<p>والآن نريد معلومات من جدول المستخدمين users وجدول التعليقات replies لذا سنستخدم عبارة LEFT JOIN مرة أخرى. حيث يكون الشرط كالتالي: معرف المستخدم user id يجب أن يكون نفسه في حقل reply_by (مؤلف التعليق) . وبهذه الطريقة نستطيع عرض اسم المستخدم للمستخدم الذي قام بإضافة تعليق ما.</p>

<p>العرض الأخير للمواضيع سيبدو على الشكل:</p>

<p><a href="/assets/9.png" class="popup img-link  shimmer"><img src="/assets/9.png" alt="كيفية عمل منتدى باستخدام php و MySQL من الصفر-9" loading="lazy"></a></p>

<h2 id="الخطوة-12-إضافة-تعليق"><span class="me-2">الخطوة 12: إضافة تعليق</span><a href="#الخطوة-12-إضافة-تعليق" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h2>

<p>والآن دعنا ننهي آخر جزء متبقي لدينا من المنتدى، ألا وهو إمكانية إضافة تعليق. سنبدأ بعمل نموذج للتعليق (بلغة html) :</p>

<div class="language-html highlighter-rouge"><div class="code-header">
        <span data-label-text="HTML"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>
<span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"post"</span> <span class="na">action=</span><span class="s">"reply.php?id=5"</span><span class="nt">&gt;</span>
<span class="nt">&lt;textarea</span> <span class="na">name=</span><span class="s">"reply-content"</span><span class="nt">&gt;&lt;/textarea</span> <span class="nt">&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Submit reply"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<p><a href="/assets/10.png" class="popup img-link  shimmer"><img src="/assets/10.png" alt="كيفية عمل منتدى باستخدام php و MySQL من الصفر-10" loading="lazy"></a></p>

<p>وفي النهاية سيكون الكود الكامل لملف reply.php كالتالي:</p>

<div class="language-php highlighter-rouge"><div class="code-header">
        <span data-label-text="PHP"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
</pre></td><td class="rouge-code"><pre>
<span class="cp">&lt;?php</span>
<span class="c1">//reply.php</span>
<span class="k">include</span> <span class="s1">'connect.php'</span><span class="p">;</span>
<span class="k">include</span> <span class="s1">'header.php'</span><span class="p">;</span>
<span class="k">if</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'REQUEST_METHOD'</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">'POST'</span><span class="p">)</span>
<span class="p">{</span>
	<span class="c1">//someone is calling the file directly, which we don't want</span>
	<span class="k">echo</span> <span class="s1">'This file cannot be called directly.'</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
	<span class="c1">//check for sign in status</span>
	<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'signed_in'</span><span class="p">])</span>
	<span class="p">{</span>
		<span class="k">echo</span> <span class="s1">'You must be signed in to post a reply.'</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">else</span>
	<span class="p">{</span>
		<span class="c1">//a real user posted a real reply</span>
		<span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"INSERT INTO 
					posts(post_content,
							post_date,
							post_topic,
							post_by) 
				VALUES ('"</span> <span class="mf">.</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'reply-content'</span><span class="p">]</span> <span class="mf">.</span> <span class="s2">"',
						NOW(),
						"</span> <span class="mf">.</span> <span class="nb">mysql_real_escape_string</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">'id'</span><span class="p">])</span> <span class="mf">.</span> <span class="s2">",
						"</span> <span class="mf">.</span> <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'user_id'</span><span class="p">]</span> <span class="mf">.</span> <span class="s2">")"</span><span class="p">;</span>
						
		<span class="nv">$result</span> <span class="o">=</span> <span class="nb">mysql_query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>
		<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$result</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">echo</span> <span class="s1">'Your reply has not been saved, please try again later.'</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">else</span>
		<span class="p">{</span>
			<span class="k">echo</span> <span class="s1">'Your reply has been saved, check out &lt;a href="topic.php?id='</span> <span class="mf">.</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">'id'</span><span class="p">])</span> <span class="mf">.</span> <span class="s1">'"&gt;the topic&lt;/a&gt;.'</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="k">include</span> <span class="s1">'footer.php'</span><span class="p">;</span>
<span class="cp">?&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<p>انظر التعليقات ضمن الكود لفهم ما يجري.</p>

<p>نتأكد أولاً من وجود المستخدم ثم نضيف (ندرج) التعليق لقاعدة البيانات.</p>

<p><a href="/assets/11.png" class="popup img-link  shimmer"><img src="/assets/11.png" alt="كيفية عمل منتدى باستخدام php و MySQL من الصفر-11" loading="lazy"></a></p>

<h2 id="الخطوة-13-تسجيل-الخروج"><span class="me-2">الخطوة 13: تسجيل الخروج</span><a href="#الخطوة-13-تسجيل-الخروج" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h2>

<p>يتم تسجيل الخروج من خلال الصفحة signout.php بالكود البسيط التالي:</p>

<div class="language-sql highlighter-rouge"><div class="code-header">
        <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="تم النسخ!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre>
<span class="o">&lt;?</span><span class="n">php</span>
<span class="o">//</span> <span class="k">Initialize</span> <span class="n">the</span> <span class="k">session</span>
<span class="n">session_start</span><span class="p">();</span>
 
<span class="o">//</span> <span class="n">Unset</span> <span class="k">all</span> <span class="k">of</span> <span class="n">the</span> <span class="k">session</span> <span class="n">variables</span>
<span class="err">$</span><span class="n">_SESSION</span> <span class="o">=</span> <span class="n">array</span><span class="p">();</span>
 
<span class="o">//</span> <span class="k">Destroy</span> <span class="n">the</span> <span class="k">session</span><span class="p">.</span>
<span class="n">session_destroy</span><span class="p">();</span>
 
<span class="o">//</span> <span class="n">Redirect</span> <span class="k">to</span> <span class="n">login</span> <span class="n">page</span>
<span class="n">header</span><span class="p">(</span><span class="nv">"location: signout.php"</span><span class="p">);</span>
<span class="n">exit</span><span class="p">;</span>
<span class="o">?&gt;</span>

</pre></td></tr></tbody></table></code></div></div>

<h2 id="النهاية"><span class="me-2">النهاية</span><a href="#النهاية" class="anchor text-muted" aria-label="link to paragraph"><i class="fas fa-hashtag"></i></a></h2>

<p>الآن وبعد قراءتك لهذا الشرح ستكون لديك المعرفة الكافية لبناء منتدى، أتمنى أن يكون الشرح واضحاً وأنك لم تعترك مع أية مشاكل في طريقك ..</p>

<p>إذا كان هناك أي غموض بالشرح أو واجهتك أي مشكلة فلا تتردد أبداً بمراسلتي أو ترك تعليق في الأسفل</p>

  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    

    <!-- tags -->
    
      <div class="post-tags">
        <i class="fa fa-tags fa-fw me-1"></i>
        
          <a
            href="/tags/php/"
            class="post-tag no-text-decoration"
          >PHP</a>
        
          <a
            href="/tags/%D8%A8%D8%B1%D9%85%D8%AC%D8%A9/"
            class="post-tag no-text-decoration"
          >برمجة</a>
        
      </div>
    

    <div
      class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      "
    >
      <div class="license-wrapper">
        
          

          هذا المنشور تحت ترخيص 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         بواسطة المؤلف.
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">شارك</span>
  <span class="share-icons">
    
    
    

    

      

      <a href="https://twitter.com/intent/tweet?text=%D8%A5%D9%86%D8%B4%D8%A7%D8%A1%20%D9%85%D9%86%D8%AA%D8%AF%D9%89%20PHP%20%D9%85%D9%86%20%D8%A7%D9%84%D8%B5%D9%81%D8%B1%20-%20%D9%85%D8%AF%D9%88%D9%86%D8%A9%20%D9%85%D9%84%D9%87%D9%85&url=http%3A%2F%2Flocalhost%3A4000%2Fphp-forum-from-scratch%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter">
        <i class="fa-fw fa-brands fa-square-x-twitter"></i>
      </a>
    

      

      <a href="https://www.facebook.com/sharer/sharer.php?title=%D8%A5%D9%86%D8%B4%D8%A7%D8%A1%20%D9%85%D9%86%D8%AA%D8%AF%D9%89%20PHP%20%D9%85%D9%86%20%D8%A7%D9%84%D8%B5%D9%81%D8%B1%20-%20%D9%85%D8%AF%D9%88%D9%86%D8%A9%20%D9%85%D9%84%D9%87%D9%85&u=http%3A%2F%2Flocalhost%3A4000%2Fphp-forum-from-scratch%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook">
        <i class="fa-fw fab fa-facebook-square"></i>
      </a>
    

      

      <a href="https://t.me/share/url?url=http%3A%2F%2Flocalhost%3A4000%2Fphp-forum-from-scratch%2F&text=%D8%A5%D9%86%D8%B4%D8%A7%D8%A1%20%D9%85%D9%86%D8%AA%D8%AF%D9%89%20PHP%20%D9%85%D9%86%20%D8%A7%D9%84%D8%B5%D9%81%D8%B1%20-%20%D9%85%D8%AF%D9%88%D9%86%D8%A9%20%D9%85%D9%84%D9%87%D9%85" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram">
        <i class="fa-fw fab fa-telegram"></i>
      </a>
    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="أنسخ الرابط"
      data-title-succeed="تم نسخ الرابط بنجاح!"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted">
            <div class="access">
              <!-- Get 5 last posted/updated posts -->














  <section id="access-lastmod">
    <h2 class="panel-heading">المحدثة مؤخرا</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/sql/like">سلسلة دروس SQL| عامل LIKE</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/Java-notes/">ملاحظات جافا</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/sql/aliases">سلسلة دروس SQL| الأسماء المستعارة</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/sql/between">سلسلة دروس SQL| عامل Between</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/sql/in">سلسلة دروس SQL| عامل IN</a>
        </li>
      
    </ul>
  </section>
  <!-- #access-lastmod -->


              <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">الوسوم الشائعة</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%D8%AA%D8%B9%D9%84%D9%8A%D9%85/">تعليم</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%D9%84%D9%8A%D9%86%D9%83%D8%B3/">لينكس</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%D8%A5%D9%86%D8%AA%D8%B1%D9%86%D8%AA/">إنترنت</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%D8%A8%D8%B1%D9%85%D8%AC%D8%A9/">برمجة</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%D8%AA%D9%82%D9%86%D9%8A%D8%A9/">تقنية</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%D8%A3%D9%86%D8%B8%D9%85%D8%A9/">أنظمة</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%D8%B4%D8%A8%D9%83%D8%A7%D8%AA/">شبكات</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/github/">Github</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/java/">Java</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/google/">Google</a>
      
    </div>
  </section>


            </div>

            
              
              



  <section id="toc-wrapper" class="d-none ps-0 pe-4">
    <h2 class="panel-heading ps-3 mb-2">محتويات</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->















  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
    
  

  

  

  

  

  











  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">إقرأ المزيد</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/php-script-to-upload-file/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1466283600"
  data-df="ll"
  
>
  Jun 19, 2016
</time>

              <h4 class="pt-0 my-2">سكريبت php بسيط لرفع ملف</h4>
              <div class="text-muted">
                <p>نقدم لكم سكريبت بسيط بلغة php لرفع ملف .

يستخدم هذا السكريبت لرفع صور أو ملفات من نوع آخر لسيرفرك ، حيث يحتوي على نموذج بلغة HTML فيه حقل لرفع ملف ، و كود php والذي يتأكد من نوع الملف (لاحقته) ، ح...</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/java-project-from-scratch/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1614459600"
  data-df="ll"
  
>
  Feb 28, 2021
</time>

              <h4 class="pt-0 my-2">بناء تطبيق جافا إف إكس من الصفر</h4>
              <div class="text-muted">
                <p>شرح عمل تطبيق بلغة جافا مع واجهة JavaFX وقاعدة بيانات MySQL من الصفر</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/java-dictionary/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1614373200"
  data-df="ll"
  
>
  Feb 27, 2021
</time>

              <h4 class="pt-0 my-2">القاموس في لغة جافا</h4>
              <div class="text-muted">
                <p>شرح صنف القاموس Dictionary ودالاته في لغة جافا مع مثال عملي</p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->


            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <a
      href="/sql/where"
      class="btn btn-outline-primary"
      aria-label="الأقدم"
    >
      <p>سلسلة دروس SQL|عبارة WHERE</p>
    </a>
  

  
    <a
      href="/markdown/"
      class="btn btn-outline-primary"
      aria-label="الأجدد"
    >
      <p>أساسيات لغة ماركداون Markdown</p>
    </a>
  
</nav>

            
              
              <!-- The comments switcher -->

  
  <!-- https://giscus.app/ -->
<script type="text/javascript">
  (function () {
    const origin = 'https://giscus.app';
    const lightTheme = 'light';
    const darkTheme = 'dark_dimmed';

    let initTheme = lightTheme;
    const html = document.documentElement;

    if (
      (html.hasAttribute('data-mode') &&
        html.getAttribute('data-mode') === 'dark') ||
      (!html.hasAttribute('data-mode') &&
        window.matchMedia('(prefers-color-scheme: dark)').matches)
    ) {
      initTheme = darkTheme;
    }

    let giscusAttributes = {
      src: 'https://giscus.app/client.js',
      'data-repo': 'Mulham/mulham.github.io',
      'data-repo-id': 'MDEwOlJlcG9zaXRvcnk2MTIwNjI5NQ==',
      'data-category': 'General',
      'data-category-id': 'MDE4OkRpc2N1c3Npb25DYXRlZ29yeTMyMTE0MDA3',
      'data-mapping': 'pathname',
      'data-strict' : '0',
      'data-reactions-enabled': '1',
      'data-emit-metadata': '0',
      'data-theme': initTheme,
      'data-input-position': 'top',
      'data-lang': 'ar',
      'data-loading': 'lazy',
      crossorigin: 'anonymous',
      async: ''
    };

    let giscusScript = document.createElement('script');
    Object.entries(giscusAttributes).forEach(([key, value]) =>
      giscusScript.setAttribute(key, value)
    );
    document.getElementById('tail-wrapper').appendChild(giscusScript);

    addEventListener('message', (event) => {
      if (
        event.source === window &&
        event.data &&
        event.data.direction === ModeToggle.ID
      ) {const mode = event.data.message;
        const theme = mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme;

        const message = {
          setConfig: {
            theme: theme
          }
        };

        const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow;
        giscus.postMessage({ giscus: message }, origin);
      }
    });
  })();
</script>



            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>©
    <time>2024</time>

    
      <a href="https://x.com/mulham_ib">ملهم الإبراهيم</a>.
    

    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="ما لم يذكر خلاف ذلك ، يتم ترخيص منشورات المدونة على هذا الموقع بموجب ترخيص Creative Commons Attribution 4.0 International (CC BY 4.0) من قبل المؤلف."
      >بعض الحقوق محفوظة.| 
      </span>
    
   <span>
<a href="/privacy-policy" aria-label="سياسة الخصوصية والاستخدام" >سياسة الخصوصية والاستخدام</a>
    </span>
  </p>

  <p>باستخدام <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> السمة <a
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="v"
        href="https://github.com/cotes2020/jekyll-theme-chirpy"
        target="_blank"
        rel="noopener"
      >Chirpy</a>
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center d-none">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">الوسوم الشائعة</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%D8%AA%D8%B9%D9%84%D9%8A%D9%85/">تعليم</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%D9%84%D9%8A%D9%86%D9%83%D8%B3/">لينكس</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%D8%A5%D9%86%D8%AA%D8%B1%D9%86%D8%AA/">إنترنت</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%D8%A8%D8%B1%D9%85%D8%AC%D8%A9/">برمجة</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%D8%AA%D9%82%D9%86%D9%8A%D8%A9/">تقنية</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%D8%A3%D9%86%D8%B8%D9%85%D8%A9/">أنظمة</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%D8%B4%D8%A8%D9%83%D8%A7%D8%AA/">شبكات</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/github/">Github</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/java/">Java</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/google/">Google</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">يتوفر اصدار جديد للمحتوى.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      تحديث
    </button>
  </div>
</aside>

    

    <!-- JavaScripts -->
    <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->




  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.11/dayjs.min.js,npm/dayjs@1.11.11/locale/ar.min.js,npm/dayjs@1.11.11/plugin/relativeTime.min.js,npm/dayjs@1.11.11/plugin/localizedFormat.min.js,npm/tocbot@4.27.20/dist/tocbot.min.js"></script>






<script src="/assets/js/dist/post.min.js"></script>



<!-- Pageviews -->

  

  







    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('search-results'),
    json: '/assets/js/data/search.json',
    searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{snippet}</p>  </article>',
    noResultsText: '<p class="mt-5">نأسف! لا يوجد نتائج.</p>',
    templateMiddleware: function(prop, value, template) {
      if (prop === 'categories') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
        }
      }

      if (prop === 'tags') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
        }
      }
    }
  });
</script>

  </body>
</html>

